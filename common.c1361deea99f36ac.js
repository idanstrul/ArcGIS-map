"use strict";var _e=Object.defineProperty,de=Object.defineProperties,pe=Object.getOwnPropertyDescriptors,ue=Object.getOwnPropertySymbols,he=Object.prototype.hasOwnProperty,fe=Object.prototype.propertyIsEnumerable,ce=(V,x,e)=>x in V?_e(V,x,{enumerable:!0,configurable:!0,writable:!0,value:e}):V[x]=e,X=(V,x)=>{for(var e in x||(x={}))he.call(x,e)&&ce(V,e,x[e]);if(ue)for(var e of ue(x))fe.call(x,e)&&ce(V,e,x[e]);return V},se=(V,x)=>de(V,pe(x));(self.webpackChunkKapow_Maps_Exam=self.webpackChunkKapow_Maps_Exam||[]).push([[8592],{7006:(V,x,e)=>{e.d(x,{A:()=>U,B:()=>R,C:()=>S,D:()=>W,E:()=>G,F:()=>K,G:()=>z,H:()=>F,I:()=>w,J:()=>Q,K:()=>H,a:()=>A,b:()=>P,c:()=>I,d:()=>c,e:()=>f,f:()=>a,g:()=>re,h:()=>T,i:()=>p,j:()=>E,k:()=>v,l:()=>m,m:()=>l,n:()=>d,o:()=>_,p:()=>g,q:()=>M,r:()=>r,s:()=>O,t:()=>o,u:()=>L,v:()=>b,w:()=>y,x:()=>N,y:()=>j,z:()=>C});var s=e(4918),i=e(15994);function f(h){return s.G.extendedSpatialReferenceInfo(h)}function I(h,D,B){return s.G.clip(i.N,h,D,B)}function A(h,D,B){return s.G.cut(i.N,h,D,B)}function P(h,D,B){return s.G.contains(i.N,h,D,B)}function c(h,D,B){return s.G.crosses(i.N,h,D,B)}function a(h,D,B,Z){return s.G.distance(i.N,h,D,B,Z)}function T(h,D,B){return s.G.equals(i.N,h,D,B)}function p(h,D,B){return s.G.intersects(i.N,h,D,B)}function o(h,D,B){return s.G.touches(i.N,h,D,B)}function y(h,D,B){return s.G.within(i.N,h,D,B)}function E(h,D,B){return s.G.disjoint(i.N,h,D,B)}function _(h,D,B){return s.G.overlaps(i.N,h,D,B)}function r(h,D,B,Z){return s.G.relate(i.N,h,D,B,Z)}function v(h,D){return s.G.isSimple(i.N,h,D)}function O(h,D){return s.G.simplify(i.N,h,D)}function m(h,D,B=!1){return s.G.convexHull(i.N,h,D,B)}function l(h,D,B){return s.G.difference(i.N,h,D,B)}function d(h,D,B){return s.G.symmetricDifference(i.N,h,D,B)}function g(h,D,B){return s.G.intersect(i.N,h,D,B)}function L(h,D,B=null){return s.G.union(i.N,h,D,B)}function M(h,D,B,Z,$,q,k){return s.G.offset(i.N,h,D,B,Z,$,q,k)}function b(h,D,B,Z,$=!1){return s.G.buffer(i.N,h,D,B,Z,$)}function N(h,D,B,Z,$,q,k){return s.G.geodesicBuffer(i.N,h,D,B,Z,$,q,k)}function j(h,D,B,Z=!0){return s.G.nearestCoordinate(i.N,h,D,B,Z)}function C(h,D,B){return s.G.nearestVertex(i.N,h,D,B)}function U(h,D,B,Z,$){return s.G.nearestVertices(i.N,h,D,B,Z,$)}function R(h,D,B,Z){if(null==D||null==Z)throw new Error("Illegal Argument Exception");const $=s.G.rotate(D,B,Z);return $.spatialReference=h,$}function S(h,D,B){if(null==D||null==B)throw new Error("Illegal Argument Exception");const Z=s.G.flipHorizontal(D,B);return Z.spatialReference=h,Z}function W(h,D,B){if(null==D||null==B)throw new Error("Illegal Argument Exception");const Z=s.G.flipVertical(D,B);return Z.spatialReference=h,Z}function G(h,D,B,Z,$){return s.G.generalize(i.N,h,D,B,Z,$)}function K(h,D,B,Z){return s.G.densify(i.N,h,D,B,Z)}function z(h,D,B,Z,$=0){return s.G.geodesicDensify(i.N,h,D,B,Z,$)}function F(h,D,B){return s.G.planarArea(i.N,h,D,B)}function w(h,D,B){return s.G.planarLength(i.N,h,D,B)}function Q(h,D,B,Z){return s.G.geodesicArea(i.N,h,D,B,Z)}function H(h,D,B,Z){return s.G.geodesicLength(i.N,h,D,B,Z)}const re=Object.freeze({__proto__:null,extendedSpatialReferenceInfo:f,clip:I,cut:A,contains:P,crosses:c,distance:a,equals:T,intersects:p,touches:o,within:y,disjoint:E,overlaps:_,relate:r,isSimple:v,simplify:O,convexHull:m,difference:l,symmetricDifference:d,intersect:g,union:L,offset:M,buffer:b,geodesicBuffer:N,nearestCoordinate:j,nearestVertex:C,nearestVertices:U,rotate:R,flipHorizontal:S,flipVertical:W,generalize:G,densify:K,geodesicDensify:z,planarArea:F,planarLength:w,geodesicArea:Q,geodesicLength:H})},65389:(V,x,e)=>{e.d(x,{Z:()=>i});var s=e(62208);class i{constructor(I){this.size=0,this._start=0,this.maxSize=I,this._buffer=new Array(I)}get entries(){return this._buffer}enqueue(I){if(this.size===this.maxSize){const A=this._buffer[this._start];return this._buffer[this._start]=I,this._start=(this._start+1)%this.maxSize,A}return this._buffer[(this._start+this.size++)%this.maxSize]=I,null}dequeue(){if(0===this.size)return null;const I=this._buffer[this._start];return this._buffer[this._start]=null,this.size--,this._start=(this._start+1)%this.maxSize,I}peek(){return 0===this.size?null:this._buffer[this._start]}find(I){if(0===this.size)return null;for(const A of this._buffer)if((0,s.pC)(A)&&I(A))return A;return null}clear(I){let A=this.dequeue();for(;(0,s.pC)(A);)I&&I(A),A=this.dequeue()}}},77777:(V,x,e)=>{e.r(x),e.d(x,{hydratedAdapter:()=>P});var s=e(2004),i=e(72854),f=e(49672),I=e(37118),A=e(55214);const P={convertToGEGeometry:function c(E,_){if(null==_)return null;let r="cache"in _?_.cache._geVersion:void 0;return null==r&&(r=E.convertJSONToGeometry(_),"cache"in _&&(_.cache._geVersion=r)),r},exportPoint:function a(E,_,r){const v=E.hasZ(_),O=E.hasM(_),m=new f.Z({x:E.getPointX(_),y:E.getPointY(_),spatialReference:r});return v&&(m.z=E.getPointZ(_)),O&&(m.m=E.getPointM(_)),m.cache._geVersion=_,m},exportPolygon:function T(E,_,r){const v=new I.Z({rings:E.exportPaths(_),hasZ:E.hasZ(_),hasM:E.hasM(_),spatialReference:r});return v.cache._geVersion=_,v},exportPolyline:function p(E,_,r){const v=new A.Z({paths:E.exportPaths(_),hasZ:E.hasZ(_),hasM:E.hasM(_),spatialReference:r});return v.cache._geVersion=_,v},exportMultipoint:function o(E,_,r){const v=new i.Z({hasZ:E.hasZ(_),hasM:E.hasM(_),points:E.exportPoints(_),spatialReference:r});return v.cache._geVersion=_,v},exportExtent:function y(E,_,r){const v=E.hasZ(_),O=E.hasM(_),m=new s.Z({xmin:E.getXMin(_),ymin:E.getYMin(_),xmax:E.getXMax(_),ymax:E.getYMax(_),spatialReference:r});if(v){const l=E.getZExtent(_);m.zmin=l.vmin,m.zmax=l.vmax}if(O){const l=E.getMExtent(_);m.mmin=l.vmin,m.mmax=l.vmax}return m.cache._geVersion=_,m}}},32825:(V,x,e)=>{e.r(x),e.d(x,{buffer:()=>f.v,clip:()=>f.c,contains:()=>f.b,convexHull:()=>f.l,crosses:()=>f.d,cut:()=>f.a,densify:()=>f.F,difference:()=>f.m,disjoint:()=>f.j,distance:()=>f.f,equals:()=>f.h,extendedSpatialReferenceInfo:()=>f.e,flipHorizontal:()=>f.C,flipVertical:()=>f.D,generalize:()=>f.E,geodesicArea:()=>f.J,geodesicBuffer:()=>f.x,geodesicDensify:()=>f.G,geodesicLength:()=>f.K,intersect:()=>f.p,intersects:()=>f.i,isSimple:()=>f.k,nearestCoordinate:()=>f.y,nearestVertex:()=>f.z,nearestVertices:()=>f.A,offset:()=>f.q,overlaps:()=>f.o,planarArea:()=>f.H,planarLength:()=>f.I,relate:()=>f.r,rotate:()=>f.B,simplify:()=>f.s,symmetricDifference:()=>f.n,touches:()=>f.t,union:()=>f.u,within:()=>f.w}),e(4918),e(15994);var f=e(7006)},13757:(V,x,e)=>{e.d(x,{d:()=>i});var s=e(21286);function i(c,a,T){var p;const o=c.byteLength/(4*a),y=new Uint32Array(c,0,o*a);let E=new Uint32Array(o);const _=null!=(p=null==T?void 0:T.minReduction)?p:0,r=(null==T?void 0:T.originalIndices)||null,v=r?r.length:0,O=(null==T?void 0:T.componentOffsets)||null;let m=0;if(O)for(let R=0;R<O.length-1;R++){const S=O[R+1]-O[R];S>m&&(m=S)}else m=o;const l=Math.floor(1.1*m)+1;(null==P||P.length<2*l)&&(P=new Uint32Array((0,s.Sf)(2*l)));for(let R=0;R<2*l;R++)P[R]=0;let d=0;const g=!!O&&!!r,L=g?v:o,M=g?new Uint32Array(v):null,b=1.96;let N=0!==_?Math.ceil(4*b*b/(_*_)*_*(1-_)):L,j=1,C=O?O[1]:L;for(let R=0;R<L;R++){if(R===N){const F=1-d/R;if(F+b*Math.sqrt(F*(1-F)/R)<_)return null;N*=2}if(R===C){for(let F=0;F<2*l;F++)P[F]=0;if(r)for(let F=O[j-1];F<O[j];F++)M[F]=E[r[F]];C=O[++j]}const S=g?r[R]:R,W=S*a,G=A(y,W,a);let K=G%l,z=d;for(;0!==P[2*K+1];){if(P[2*K]===G){const F=P[2*K+1]-1;if(f(y,W,F*a,a)){z=E[F];break}}K++,K>=l&&(K-=l)}z===d&&(P[2*K]=G,P[2*K+1]=S+1,d++),E[S]=z}if(0!==_&&1-d/o<_)return null;if(g){for(let R=O[j-1];R<M.length;R++)M[R]=E[r[R]];E=M}const U=new Uint32Array(a*d);d=0;for(let R=0;R<L;R++)E[R]===d&&(I(y,(g?r[R]:R)*a,U,d*a,a),d++);if(r&&!g){const R=new Uint32Array(v);for(let S=0;S<R.length;S++)R[S]=E[r[S]];E=R}return{buffer:U.buffer,indices:E,uniqueCount:d}}function f(c,a,T,p){for(let o=0;o<p;o++)if(c[a+o]!==c[T+o])return!1;return!0}function I(c,a,T,p,o){for(let y=0;y<o;y++)T[p+y]=c[a+y]}function A(c,a,T){let p=0;for(let o=0;o<T;o++)p=c[a+o]+p|0,p=p+(p<<11)+(p>>>2)|0;return p>>>0}let P=null},48887:(V,x,e)=>{e.r(x),e.d(x,{default:()=>re});var s=e(15861),i=e(17626),f=e(84792),I=e(97478),A=e(26584),P=e(80542),c=e(47877),a=e(62208),T=e(99959),p=e(10699),o=e(77712),_=(e(85931),e(8314),e(90912)),r=e(68653),v=e(76898),O=e(99433),m=e(31283),l=e(2004),d=e(83137),g=e(63602),L=e(50085),M=e(19027),b=e(65088),N=e(552),j=e(50107),C=e(49286),U=e(6647),R=e(30346),S=e(99555),W=e(66120),G=e(97941),K=e(13812),z=e(14772),F=e(39058),w=e(13410),Q=e(5676);let H=class extends((0,N.h)((0,G.n)((0,S.M)((0,W.x)((0,M.O)((0,b.Y)((0,C.q)((0,U.I)((0,T.R)((0,R.Q)((0,L.V)((0,j.N)((0,P.p)(g.Z)))))))))))))){constructor(...h){super(...h),this.datesInUnknownTimezone=!1,this.dpi=96,this.gdbVersion=null,this.imageFormat="png24",this.imageMaxHeight=2048,this.imageMaxWidth=2048,this.imageTransparency=!0,this.isReference=null,this.labelsVisible=!1,this.operationalLayerType="ArcGISMapServiceLayer",this.sourceJSON=null,this.sublayers=null,this.type="map-image",this.url=null}normalizeCtorArgs(h,D){return"string"==typeof h?X({url:h},D):h}load(h){const D=(0,a.pC)(h)?h.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]},h).catch(p.r9).then(()=>this._fetchService(D))),Promise.resolve(this)}readImageFormat(h,D){const B=D.supportedImageFormatTypes;return B&&B.indexOf("PNG32")>-1?"png32":"png24"}writeSublayers(h,D,B,Z){if(!this.loaded||!h)return;const $=h.slice().reverse().flatten(({sublayers:J})=>J&&J.toArray().reverse()).toArray();let q=!1;if(this.capabilities&&this.capabilities.operations.supportsExportMap&&this.capabilities.exportMap.supportsDynamicLayers){const J=(0,m.M9)(Z.origin);if(J===m.s3.PORTAL_ITEM){const Y=this.createSublayersForOrigin("service").sublayers;q=(0,w.QV)($,Y,m.s3.SERVICE)}else if(J>m.s3.PORTAL_ITEM){const Y=this.createSublayersForOrigin("portal-item");q=(0,w.QV)($,Y.sublayers,(0,m.M9)(Y.origin))}}const k=[],ne=X({writeSublayerStructure:q},Z);let oe=q;$.forEach(J=>{const Y=J.write({},ne);k.push(Y),oe=oe||"user"===J.originOf("visible")}),k.some(J=>Object.keys(J).length>1)&&(D.layers=k),oe&&(D.visibleLayers=$.filter(J=>J.visible).map(J=>J.id))}createExportImageParameters(h,D,B,Z){const $=Z&&Z.pixelRatio||1;h&&this.version>=10&&(h=h.clone().shiftCentralMeridian());const q=new z.R({layer:this,floors:null==Z?void 0:Z.floors,scale:(0,d.yZ)({extent:h,width:D})*$}),k=q.toJSON();q.destroy();const ne=!Z||!Z.rotation||this.version<10.3?{}:{rotation:-Z.rotation},oe=h&&h.spatialReference,J=oe.wkid||JSON.stringify(oe.toJSON());k.dpi*=$;const Y={};if(null!=Z&&Z.timeExtent){const{start:te,end:ee}=Z.timeExtent.toJSON();Y.time=te&&ee&&te===ee?""+te:`${null==te?"null":te},${null==ee?"null":ee}`}else this.timeInfo&&!this.timeInfo.hasLiveData&&(Y.time="null,null");return X(X(X({bbox:h&&h.xmin+","+h.ymin+","+h.xmax+","+h.ymax,bboxSR:J,imageSR:J,size:D+","+B},k),ne),Y)}fetchImage(h,D,B,Z){var $=this;return(0,s.Z)(function*(){var q;const k={responseType:"image",signal:null!=(q=null==Z?void 0:Z.signal)?q:null,query:se(X(X(se(X(X({},$.parsedUrl.query),$.createExportImageParameters(h,D,B,Z)),{f:"image"}),$.refreshParameters),$.customParameters),{token:$.apiKey})},ne=$.parsedUrl.path+"/export";return null==k.query.dynamicLayers||$.capabilities.exportMap.supportsDynamicLayers?(0,f.default)(ne,k).then(oe=>oe.data).catch(oe=>{throw(0,p.D_)(oe)?oe:new A.Z("mapimagelayer:image-fetch-error",`Unable to load image: ${ne}`,{error:oe})}):Promise.reject(new A.Z("mapimagelayer:dynamiclayer-not-supported",`service ${$.url} doesn't support dynamic layers, which is required to be able to change the sublayer's order, rendering, labeling or source.`,{query:k.query}))})()}fetchRecomputedExtents(h={}){var D=this;return(0,s.Z)(function*(){const B=se(X({},h),{query:se(X({returnUpdates:!0,f:"json"},D.customParameters),{token:D.apiKey})}),{data:Z}=yield(0,f.default)(D.url,B),{extent:$,fullExtent:q,timeExtent:k}=Z,ne=$||q;return{fullExtent:ne&&l.Z.fromJSON(ne),timeExtent:k&&I.Z.fromJSON({start:k[0],end:k[1]})}})()}loadAll(){return(0,c.G)(this,h=>{h(this.allSublayers)})}serviceSupportsSpatialReference(h){return(0,Q.D)(this,h)}_fetchService(h){var D=this;return(0,s.Z)(function*(){if(D.sourceJSON)return void D.read(D.sourceJSON,{origin:"service",url:D.parsedUrl});const{data:B,ssl:Z}=yield(0,f.default)(D.parsedUrl.path,{query:se(X(X({f:"json"},D.parsedUrl.query),D.customParameters),{token:D.apiKey}),signal:h});Z&&(D.url=D.url.replace(/^http:/i,"https:")),D.sourceJSON=B,D.read(B,{origin:"service",url:D.parsedUrl})})()}};(0,i._)([(0,o.Cb)({type:Boolean})],H.prototype,"datesInUnknownTimezone",void 0),(0,i._)([(0,o.Cb)()],H.prototype,"dpi",void 0),(0,i._)([(0,o.Cb)()],H.prototype,"gdbVersion",void 0),(0,i._)([(0,o.Cb)()],H.prototype,"imageFormat",void 0),(0,i._)([(0,r.r)("imageFormat",["supportedImageFormatTypes"])],H.prototype,"readImageFormat",null),(0,i._)([(0,o.Cb)({json:{origins:{service:{read:{source:"maxImageHeight"}}}}})],H.prototype,"imageMaxHeight",void 0),(0,i._)([(0,o.Cb)({json:{origins:{service:{read:{source:"maxImageWidth"}}}}})],H.prototype,"imageMaxWidth",void 0),(0,i._)([(0,o.Cb)()],H.prototype,"imageTransparency",void 0),(0,i._)([(0,o.Cb)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],H.prototype,"isReference",void 0),(0,i._)([(0,o.Cb)({json:{read:!1,write:!1}})],H.prototype,"labelsVisible",void 0),(0,i._)([(0,o.Cb)({type:["ArcGISMapServiceLayer"]})],H.prototype,"operationalLayerType",void 0),(0,i._)([(0,o.Cb)({json:{read:!1,write:!1}})],H.prototype,"popupEnabled",void 0),(0,i._)([(0,o.Cb)()],H.prototype,"sourceJSON",void 0),(0,i._)([(0,o.Cb)({json:{write:{ignoreOrigin:!0}}})],H.prototype,"sublayers",void 0),(0,i._)([(0,O.c)("sublayers",{layers:{type:[F.Z]},visibleLayers:{type:[_.z8]}})],H.prototype,"writeSublayers",null),(0,i._)([(0,o.Cb)({type:["show","hide","hide-children"]})],H.prototype,"listMode",void 0),(0,i._)([(0,o.Cb)({json:{read:!1},readOnly:!0,value:"map-image"})],H.prototype,"type",void 0),(0,i._)([(0,o.Cb)(K.HQ)],H.prototype,"url",void 0),H=(0,i._)([(0,v.j)("esri.layers.MapImageLayer")],H);const re=H},28678:(V,x,e)=>{e.r(x),e.d(x,{default:()=>U});var s=e(17626),f=(e(29132),e(84792)),I=e(26584),A=e(99959),P=e(77275),c=e(21726),a=e(77712),y=(e(85931),e(8314),e(90912),e(68653)),E=e(76898),_=e(99433),r=e(63602),v=e(552),O=e(49286),m=e(6647),l=e(30346),d=e(99555),g=e(72258),L=e(2584),M=e(91309),b=e(2004),N=e(65234),j=e(49672);let C=class extends((0,v.h)((0,l.Q)((0,d.M)((0,O.q)((0,m.I)((0,A.R)(r.Z))))))){constructor(...R){super(...R),this.copyright="",this.fullExtent=new b.Z(-20037508.342787,-20037508.34278,20037508.34278,20037508.342787,N.Z.WebMercator),this.legendEnabled=!1,this.isReference=null,this.popupEnabled=!1,this.spatialReference=N.Z.WebMercator,this.subDomains=null,this.tileInfo=new L.Z({size:[256,256],dpi:96,format:"png8",compressionQuality:0,origin:new j.Z({x:-20037508.342787,y:20037508.342787,spatialReference:N.Z.WebMercator}),spatialReference:N.Z.WebMercator,lods:[new g.Z({level:0,scale:591657527.591555,resolution:156543.033928}),new g.Z({level:1,scale:295828763.795777,resolution:78271.5169639999}),new g.Z({level:2,scale:147914381.897889,resolution:39135.7584820001}),new g.Z({level:3,scale:73957190.948944,resolution:19567.8792409999}),new g.Z({level:4,scale:36978595.474472,resolution:9783.93962049996}),new g.Z({level:5,scale:18489297.737236,resolution:4891.96981024998}),new g.Z({level:6,scale:9244648.868618,resolution:2445.98490512499}),new g.Z({level:7,scale:4622324.434309,resolution:1222.99245256249}),new g.Z({level:8,scale:2311162.217155,resolution:611.49622628138}),new g.Z({level:9,scale:1155581.108577,resolution:305.748113140558}),new g.Z({level:10,scale:577790.554289,resolution:152.874056570411}),new g.Z({level:11,scale:288895.277144,resolution:76.4370282850732}),new g.Z({level:12,scale:144447.638572,resolution:38.2185141425366}),new g.Z({level:13,scale:72223.819286,resolution:19.1092570712683}),new g.Z({level:14,scale:36111.909643,resolution:9.55462853563415}),new g.Z({level:15,scale:18055.954822,resolution:4.77731426794937}),new g.Z({level:16,scale:9027.977411,resolution:2.38865713397468}),new g.Z({level:17,scale:4513.988705,resolution:1.19432856685505}),new g.Z({level:18,scale:2256.994353,resolution:.597164283559817}),new g.Z({level:19,scale:1128.497176,resolution:.298582141647617}),new g.Z({level:20,scale:564.248588,resolution:.14929107082380833}),new g.Z({level:21,scale:282.124294,resolution:.07464553541190416}),new g.Z({level:22,scale:141.062147,resolution:.03732276770595208}),new g.Z({level:23,scale:70.5310735,resolution:.01866138385297604})]}),this.type="web-tile",this.urlTemplate=null,this.wmtsInfo=null}normalizeCtorArgs(R,S){return"string"==typeof R?X({urlTemplate:R},S):R}load(R){const S=this.loadFromPortal({supportedTypes:["WMTS"]},R).then(()=>{let W="";if(this.urlTemplate)if(this.spatialReference.equals(this.tileInfo.spatialReference)){const G=new c.R9(this.urlTemplate);this.subDomains&&this.subDomains.length>0||-1===G.authority.indexOf("{subDomain}")||(W="is missing 'subDomains' property")}else W="spatialReference must match tileInfo.spatialReference";else W="is missing the required 'urlTemplate' property value";if(W)throw new I.Z("web-tile-layer:load",`WebTileLayer (title: '${this.title}', id: '${this.id}') ${W}`)});return this.addResolvingPromise(S),Promise.resolve(this)}get levelValues(){const R=[];if(!this.tileInfo)return null;for(const S of this.tileInfo.lods)R[S.level]=S.levelValue||S.level;return R}readSpatialReference(R,S){return R||S.fullExtent&&S.fullExtent.spatialReference&&N.Z.fromJSON(S.fullExtent.spatialReference)}get tileServers(){if(!this.urlTemplate)return null;const R=[],{urlTemplate:S,subDomains:W}=this,G=new c.R9(S),K=G.scheme?G.scheme+"://":"//",z=K+G.authority+"/";if(-1===G.authority.indexOf("{subDomain}"))R.push(z);else if(W&&W.length>0&&G.authority.split(".").length>1)for(const F of W)R.push(K+G.authority.replace(/\{subDomain\}/gi,F)+"/");return R.map(F=>("/"!==F.charAt(F.length-1)&&(F+="/"),F))}get urlPath(){if(!this.urlTemplate)return null;const R=this.urlTemplate,S=new c.R9(R);return R.substring(((S.scheme?S.scheme+"://":"//")+S.authority+"/").length)}readUrlTemplate(R,S){return R||S.templateUrl}writeUrlTemplate(R,S){R&&(0,c.oC)(R)&&(R="https:"+R),R&&(R=R.replace(/\{z\}/gi,"{level}").replace(/\{x\}/gi,"{col}").replace(/\{y\}/gi,"{row}"),R=(0,c.Fv)(R)),S.templateUrl=R}fetchTile(R,S,W,G={}){const{signal:K}=G,z=this.getTileUrl(R,S,W),F={responseType:"image",signal:K,query:X({},this.refreshParameters)};return(0,f.default)(z,F).then(w=>w.data)}getTileUrl(R,S,W){const G=this.levelValues[R];return this.tileServers[S%this.tileServers.length]+(0,P.gx)(this.urlPath,{level:G,z:G,col:W,x:W,row:S,y:S})}};(0,s._)([(0,a.Cb)({type:String,value:"",json:{write:!0}})],C.prototype,"copyright",void 0),(0,s._)([(0,a.Cb)({type:b.Z,json:{write:!0},nonNullable:!0})],C.prototype,"fullExtent",void 0),(0,s._)([(0,a.Cb)({readOnly:!0,json:{read:!1,write:!1}})],C.prototype,"legendEnabled",void 0),(0,s._)([(0,a.Cb)({type:["show","hide"]})],C.prototype,"listMode",void 0),(0,s._)([(0,a.Cb)()],C.prototype,"levelValues",null),(0,s._)([(0,a.Cb)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],C.prototype,"isReference",void 0),(0,s._)([(0,a.Cb)({type:["WebTiledLayer"],value:"WebTiledLayer"})],C.prototype,"operationalLayerType",void 0),(0,s._)([(0,a.Cb)({readOnly:!0,json:{read:!1,write:!1}})],C.prototype,"popupEnabled",void 0),(0,s._)([(0,a.Cb)({type:N.Z})],C.prototype,"spatialReference",void 0),(0,s._)([(0,y.r)("spatialReference",["spatialReference","fullExtent.spatialReference"])],C.prototype,"readSpatialReference",null),(0,s._)([(0,a.Cb)({type:[String],json:{write:!0}})],C.prototype,"subDomains",void 0),(0,s._)([(0,a.Cb)({type:L.Z,json:{write:!0}})],C.prototype,"tileInfo",void 0),(0,s._)([(0,a.Cb)({readOnly:!0})],C.prototype,"tileServers",null),(0,s._)([(0,a.Cb)({json:{read:!1}})],C.prototype,"type",void 0),(0,s._)([(0,a.Cb)()],C.prototype,"urlPath",null),(0,s._)([(0,a.Cb)({type:String,json:{origins:{"portal-item":{read:{source:"url"}}}}})],C.prototype,"urlTemplate",void 0),(0,s._)([(0,y.r)("urlTemplate",["urlTemplate","templateUrl"])],C.prototype,"readUrlTemplate",null),(0,s._)([(0,_.c)("urlTemplate",{templateUrl:{type:String}})],C.prototype,"writeUrlTemplate",null),(0,s._)([(0,a.Cb)({type:M.Z,json:{write:!0}})],C.prototype,"wmtsInfo",void 0),C=(0,s._)([(0,E.j)("esri.layers.WebTileLayer")],C);const U=C},1476:(V,x,e)=>{e.d(x,{S:()=>i,X:()=>s});const s=1;function i(f,I){let A=0;for(const c of I){var P;const a=null==(P=c.attributes)?void 0:P[f];"number"==typeof a&&isFinite(a)&&(A=Math.max(A,a))}return A}},35775:(V,x,e)=>{e.d(x,{O0:()=>p,av:()=>P,b:()=>v,d1:()=>a,og:()=>E});var s=e(15861),i=e(37053),f=e(36630);class I{constructor(){this.code=null,this.description=null}}class A{constructor(l){this.error=new I,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=l}}function P(m){return new A(m)}class c{constructor(l){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=l}}function a(m){return new c(m)}const T=new Set;function p(m,l,d,g=!1,L){T.clear();for(const M in d){const b=m.get(M);if(!b)continue;const N=d[M],j=o(b,N);if(j!==N&&L&&L.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",details:{field:b,originalValue:N,sanitizedValue:j}}),T.add(b.name),b&&(g||b.editable)){const C=(0,f.Qc)(b,j);if(C)return P((0,f.vP)(C,b,j));l[b.name]=j}}for(const M of m.requiredFields)if(!T.has(M.name))return P(`missing required field "${M.name}"`);return null}function o(m,l){let d=l;return"string"==typeof l&&(0,f.H7)(m)?d=parseFloat(l):null!=l&&(0,f.qN)(m)&&"string"!=typeof l&&(d=String(l)),(0,f.Pz)(d)}let y;function E(m,l){if(!m||!(0,i.JY)(l))return m;if("rings"in m||"paths"in m){if(!y)throw new TypeError("geometry engine not loaded");return y.simplify(l,m)}return m}function _(){return r.apply(this,arguments)}function r(){return(r=(0,s.Z)(function*(){return y||(y=yield Promise.all([e.e(4918),e.e(8592)]).then(e.bind(e,32825)),y)})).apply(this,arguments)}function v(m,l){return O.apply(this,arguments)}function O(){return(O=(0,s.Z)(function*(m,l){!(0,i.JY)(m)||"esriGeometryPolygon"!==l&&"esriGeometryPolyline"!==l||(yield _())})).apply(this,arguments)}},5143:(V,x,e)=>{e.d(x,{Z:()=>y});var s=e(17626),f=(e(29132),e(77712)),c=(e(85931),e(8314),e(90912),e(68653)),a=e(76898),T=e(51026),p=e(28930),o=e(65234);const y=E=>{let _=class extends E{constructor(){super(...arguments),this.copyright=null,this.minScale=0,this.maxScale=0,this.spatialReference=null,this.tileInfo=null,this.tilemapCache=null}readMinScale(r,v){return null!=v.minLOD&&null!=v.maxLOD?r:0}readMaxScale(r,v){return null!=v.minLOD&&null!=v.maxLOD?r:0}get supportsBlankTile(){return this.version>=10.2}readTilemapCache(r,v){return v.capabilities&&v.capabilities.indexOf("Tilemap")>-1?new p.y({layer:this}):null}};return(0,s._)([(0,f.Cb)({json:{read:{source:"copyrightText"}}})],_.prototype,"copyright",void 0),(0,s._)([(0,f.Cb)()],_.prototype,"minScale",void 0),(0,s._)([(0,c.r)("service","minScale")],_.prototype,"readMinScale",null),(0,s._)([(0,f.Cb)()],_.prototype,"maxScale",void 0),(0,s._)([(0,c.r)("service","maxScale")],_.prototype,"readMaxScale",null),(0,s._)([(0,f.Cb)({type:o.Z})],_.prototype,"spatialReference",void 0),(0,s._)([(0,f.Cb)({readOnly:!0})],_.prototype,"supportsBlankTile",null),(0,s._)([(0,f.Cb)(T.h)],_.prototype,"tileInfo",void 0),(0,s._)([(0,f.Cb)()],_.prototype,"tilemapCache",void 0),(0,s._)([(0,c.r)("service","tilemapCache",["capabilities"])],_.prototype,"readTilemapCache",null),(0,s._)([(0,f.Cb)()],_.prototype,"version",void 0),_=(0,s._)([(0,a.j)("esri.layers.mixins.ArcGISCachedService")],_),_}},22825:(V,x,e)=>{e.d(x,{A:()=>i});const s=[[3819,3819],[3821,3824],[3889,3889],[3906,3906],[4001,4025],[4027,4036],[4039,4047],[4052,4055],[4074,4075],[4080,4081],[4120,4176],[4178,4185],[4188,4216],[4218,4289],[4291,4304],[4306,4319],[4322,4326],[4463,4463],[4470,4470],[4475,4475],[4483,4483],[4490,4490],[4555,4558],[4600,4646],[4657,4765],[4801,4811],[4813,4821],[4823,4824],[4901,4904],[5013,5013],[5132,5132],[5228,5229],[5233,5233],[5246,5246],[5252,5252],[5264,5264],[5324,5340],[5354,5354],[5360,5360],[5365,5365],[5370,5373],[5381,5381],[5393,5393],[5451,5451],[5464,5464],[5467,5467],[5489,5489],[5524,5524],[5527,5527],[5546,5546],[2044,2045],[2081,2083],[2085,2086],[2093,2093],[2096,2098],[2105,2132],[2169,2170],[2176,2180],[2193,2193],[2200,2200],[2206,2212],[2319,2319],[2320,2462],[2523,2549],[2551,2735],[2738,2758],[2935,2941],[2953,2953],[3006,3030],[3034,3035],[3038,3051],[3058,3059],[3068,3068],[3114,3118],[3126,3138],[3150,3151],[3300,3301],[3328,3335],[3346,3346],[3350,3352],[3366,3366],[3389,3390],[3416,3417],[3833,3841],[3844,3850],[3854,3854],[3873,3885],[3907,3910],[4026,4026],[4037,4038],[4417,4417],[4434,4434],[4491,4554],[4839,4839],[5048,5048],[5105,5130],[5253,5259],[5269,5275],[5343,5349],[5479,5482],[5518,5519],[5520,5520],[20004,20032],[20064,20092],[21413,21423],[21473,21483],[21896,21899],[22171,22177],[22181,22187],[22191,22197],[25884,25884],[27205,27232],[27391,27398],[27492,27492],[28402,28432],[28462,28492],[30161,30179],[30800,30800],[31251,31259],[31275,31279],[31281,31290],[31466,31700]];function i(f){return s.some(([I,A])=>f>=I&&f<=A)}},14772:(V,x,e)=>{e.d(x,{R:()=>_});var s=e(17626),i=e(14517),f=e(80542),I=e(62208),A=e(77712),T=(e(85931),e(8314),e(90912),e(76898)),p=e(13812),o=e(13410),y=e(79530);const E={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};let _=class extends((0,f.p)(i.Z)){constructor(r){super(r),this.floors=null,this.scale=0}destroy(){this.layer=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const r=this.visibleSublayers.map(v=>{const O=(0,y.ff)(this.floors,v);return v.toExportImageJSON(O)});return r.length?JSON.stringify(r):null}get hasDynamicLayers(){return this.layer&&(0,o.FN)(this.visibleSublayers,this.layer.serviceSublayers,this.layer)}set layer(r){this._get("layer")!==r&&(this._set("layer",r),this.handles.remove("layer"),r&&this.handles.add([r.allSublayers.on("change",()=>this.notifyChange("visibleSublayers")),r.on("sublayer-update",v=>this.notifyChange(E[v.propertyName]))],"layer"))}get layers(){const r=this.visibleSublayers;return r?r.length?"show:"+r.map(v=>v.id).join(","):"show:-1":null}get layerDefs(){var r;const v=!(null==(r=this.floors)||!r.length),O=this.visibleSublayers.filter(m=>null!=m.definitionExpression||v&&null!=m.floorInfo);return O.length?JSON.stringify(O.reduce((m,l)=>{const d=(0,y.ff)(this.floors,l),g=(0,I.pC)(d)?(0,y.Hp)(d,l):l.definitionExpression;return m[l.id]=g,m},{})):null}get version(){this.commitProperty("layers"),this.commitProperty("layerDefs"),this.commitProperty("dynamicLayers"),this.commitProperty("timeExtent");const r=this.layer;return r&&(r.commitProperty("dpi"),r.commitProperty("imageFormat"),r.commitProperty("imageTransparency"),r.commitProperty("gdbVersion")),(this._get("version")||0)+1}get visibleSublayers(){const r=[];if(!this.layer)return r;const v=this.layer.sublayers,O=l=>{const d=this.scale;l.visible&&(0===d||(0===l.minScale||d<=l.minScale)&&(0===l.maxScale||d>=l.maxScale))&&(l.sublayers?l.sublayers.forEach(O):r.unshift(l))};v&&v.forEach(O);const m=this._get("visibleSublayers");return!m||m.length!==r.length||m.some((l,d)=>r[d]!==l)?r:m}toJSON(){const r=this.layer;let v={dpi:r.dpi,format:r.imageFormat,transparent:r.imageTransparency,gdbVersion:r.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?v.dynamicLayers=this.dynamicLayers:v=se(X({},v),{layers:this.layers,layerDefs:this.layerDefs}),v}};(0,s._)([(0,A.Cb)({readOnly:!0})],_.prototype,"dynamicLayers",null),(0,s._)([(0,A.Cb)()],_.prototype,"floors",void 0),(0,s._)([(0,A.Cb)({readOnly:!0})],_.prototype,"hasDynamicLayers",null),(0,s._)([(0,A.Cb)()],_.prototype,"layer",null),(0,s._)([(0,A.Cb)({readOnly:!0})],_.prototype,"layers",null),(0,s._)([(0,A.Cb)({readOnly:!0})],_.prototype,"layerDefs",null),(0,s._)([(0,A.Cb)({type:Number})],_.prototype,"scale",void 0),(0,s._)([(0,A.Cb)(p.qG)],_.prototype,"timeExtent",void 0),(0,s._)([(0,A.Cb)({readOnly:!0})],_.prototype,"version",null),(0,s._)([(0,A.Cb)({readOnly:!0})],_.prototype,"visibleSublayers",null),_=(0,s._)([(0,T.j)("esri.layers.mixins.ExportImageParameters")],_)},51920:(V,x,e)=>{e.d(x,{j:()=>p});var s=e(17626),i=e(14517),f=e(80542),I=e(77712),a=(e(85931),e(8314),e(90912),e(76898));const T={visible:"visibleSublayers"};let p=class extends((0,f.p)(i.Z)){constructor(o){super(o),this.scale=0}set layer(o){this._get("layer")!==o&&(this._set("layer",o),this.handles.remove("layer"),o&&this.handles.add([o.sublayers.on("change",()=>this.notifyChange("visibleSublayers")),o.on("wms-sublayer-update",y=>this.notifyChange(T[y.propertyName]))],"layer"))}get layers(){const{visibleSublayers:o}=this;return o.filter(y=>y.name).map(y=>y.name).join(",")}get version(){this.commitProperty("layers");const o=this.layer;return o&&o.commitProperty("imageTransparency"),(this._get("version")||0)+1}get visibleSublayers(){const{layer:o,scale:y}=this,E=null==o?void 0:o.sublayers,_=[],r=v=>{const{minScale:O,maxScale:m,sublayers:l,visible:d}=v;d&&(0===y||(0===O||y<=O)&&(0===m||y>=m))&&(l?l.forEach(r):_.unshift(v))};return null==E||E.forEach(r),_}toJSON(){const{layer:o,layers:y}=this,{imageFormat:E,imageTransparency:_,version:r}=o;return{format:E,request:"GetMap",service:"WMS",styles:"",transparent:_?"TRUE":"FALSE",version:r,layers:y}}};(0,s._)([(0,I.Cb)()],p.prototype,"layer",null),(0,s._)([(0,I.Cb)({readOnly:!0})],p.prototype,"layers",null),(0,s._)([(0,I.Cb)({type:Number})],p.prototype,"scale",void 0),(0,s._)([(0,I.Cb)({readOnly:!0})],p.prototype,"version",null),(0,s._)([(0,I.Cb)({readOnly:!0})],p.prototype,"visibleSublayers",null),p=(0,s._)([(0,a.j)("esri.layers.support.ExportWMSImageParameters")],p)},74711:(V,x,e)=>{e.d(x,{W:()=>T});var s=e(15861),i=e(24263),f=e(84792),I=e(62208),A=e(10699),P=e(15382),c=e(84687),a=e(55463);class T{constructor(o,y,E,_){this.parsedUrl=o,this.portalItem=y,this.apiKey=E,this.signal=_,this.rootDocument=null;const r=this.parsedUrl.path.match(/^(.*)\/SceneServer\/layers\/([\d]*)\/?$/i);r&&(this.urlParts={root:r[1],layerId:parseInt(r[2],10)})}fetch(){var o=this;return(0,s.Z)(function*(){var y;if(!o.urlParts)return null;const E=null!=(y=o.portalItem)?y:yield o._portalItemFromServiceItemId();if((0,I.Wi)(E))return o._loadFromUrl();const _=yield o._findAndLoadRelatedPortalItem(E);return(0,I.Wi)(_)?null:o._loadFeatureLayerFromPortalItem(_)})()}fetchPortalItem(){var o=this;return(0,s.Z)(function*(){var y;if(!o.urlParts)return null;const E=null!=(y=o.portalItem)?y:yield o._portalItemFromServiceItemId();return(0,I.Wi)(E)?null:o._findAndLoadRelatedPortalItem(E)})()}_fetchRootDocument(){var o=this;return(0,s.Z)(function*(){if((0,I.pC)(o.rootDocument))return o.rootDocument;if((0,I.Wi)(o.urlParts))return o.rootDocument={},{};const y={query:{f:"json",token:o.apiKey},responseType:"json",signal:o.signal},E=`${o.urlParts.root}/SceneServer`;try{const _=yield(0,f.default)(E,y);o.rootDocument=_.data}catch(_){o.rootDocument={}}return o.rootDocument})()}_fetchServiceOwningPortalUrl(){var o=this;return(0,s.Z)(function*(){var y;const E=null==(y=i.id)?void 0:y.findServerInfo(o.parsedUrl.path);if(null!=E&&E.owningSystemUrl)return E.owningSystemUrl;const _=o.parsedUrl.path.replace(/(.*\/rest)\/.*/i,"$1")+"/info";try{const r=(yield(0,f.default)(_,{query:{f:"json"},responseType:"json",signal:o.signal})).data.owningSystemUrl;if(r)return r}catch(r){(0,A.r9)(r)}return null})()}_findAndLoadRelatedPortalItem(o){var y=this;return(0,s.Z)(function*(){try{return(yield o.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},{signal:y.signal})).find(E=>"Feature Service"===E.type)||null}catch(E){return(0,A.r9)(E),null}})()}_loadFeatureLayerFromPortalItem(o){var y=this;return(0,s.Z)(function*(){yield o.load({signal:y.signal});const E=yield y._findMatchingAssociatedSublayerUrl(o.url);return new P.default({url:E,portalItem:o}).load({signal:y.signal})})()}_loadFromUrl(){var o=this;return(0,s.Z)(function*(){const y=yield o._findMatchingAssociatedSublayerUrl(`${o.urlParts.root}/FeatureServer`);return new P.default({url:y}).load({signal:o.signal})})()}_findMatchingAssociatedSublayerUrl(o){var y=this;return(0,s.Z)(function*(){const E=o.replace(/^(.*FeatureServer)(\/[\d]*\/?)?$/i,"$1"),_={query:{f:"json"},responseType:"json",authMode:"no-prompt",signal:y.signal},r=y.urlParts.layerId,v=y._fetchRootDocument(),O=(0,f.default)(E,_),[m,l]=yield Promise.all([O,v]),d=l&&l.layers,g=m.data&&m.data.layers;if(!Array.isArray(g))throw new Error("expected layers array");if(Array.isArray(d)){for(let L=0;L<Math.min(d.length,g.length);L++)if(d[L].id===r)return`${E}/${g[L].id}`}else if(r<g.length)return`${E}/${g[r].id}`;throw new Error("could not find matching associated sublayer")})()}_portalItemFromServiceItemId(){var o=this;return(0,s.Z)(function*(){const y=(yield o._fetchRootDocument()).serviceItemId;if(!y)return null;const E=new a.default({id:y,apiKey:o.apiKey}),_=yield o._fetchServiceOwningPortalUrl();(0,I.pC)(_)&&(E.portal=new c.Z({url:_}));try{return E.load({signal:o.signal})}catch(r){return(0,A.r9)(r),null}})()}}},35031:(V,x,e)=>{e.d(x,{H3:()=>m,QI:()=>y,U4:()=>T,Yh:()=>_});var s=e(17626),i=e(86810),f=e(77712),c=(e(85931),e(8314),e(90912),e(55342)),a=e(76898);let T=class extends i.wq{constructor(){super(...arguments),this.nodesPerPage=null,this.rootIndex=0,this.lodSelectionMetricType=null}};(0,s._)([(0,f.Cb)({type:Number})],T.prototype,"nodesPerPage",void 0),(0,s._)([(0,f.Cb)({type:Number})],T.prototype,"rootIndex",void 0),(0,s._)([(0,f.Cb)({type:String})],T.prototype,"lodSelectionMetricType",void 0),T=(0,s._)([(0,a.j)("esri.layer.support.I3SNodePageDefinition")],T);let p=class extends i.wq{constructor(){super(...arguments),this.factor=1}};(0,s._)([(0,f.Cb)({type:Number,json:{read:{source:"textureSetDefinitionId"}}})],p.prototype,"id",void 0),(0,s._)([(0,f.Cb)({type:Number})],p.prototype,"factor",void 0),p=(0,s._)([(0,a.j)("esri.layer.support.I3SMaterialTexture")],p);let o=class extends i.wq{constructor(){super(...arguments),this.baseColorFactor=[1,1,1,1],this.baseColorTexture=null,this.metallicRoughnessTexture=null,this.metallicFactor=1,this.roughnessFactor=1}};(0,s._)([(0,f.Cb)({type:[Number]})],o.prototype,"baseColorFactor",void 0),(0,s._)([(0,f.Cb)({type:p})],o.prototype,"baseColorTexture",void 0),(0,s._)([(0,f.Cb)({type:p})],o.prototype,"metallicRoughnessTexture",void 0),(0,s._)([(0,f.Cb)({type:Number})],o.prototype,"metallicFactor",void 0),(0,s._)([(0,f.Cb)({type:Number})],o.prototype,"roughnessFactor",void 0),o=(0,s._)([(0,a.j)("esri.layer.support.I3SMaterialPBRMetallicRoughness")],o);let y=class extends i.wq{constructor(){super(...arguments),this.alphaMode="opaque",this.alphaCutoff=.25,this.doubleSided=!1,this.cullFace="none",this.normalTexture=null,this.occlusionTexture=null,this.emissiveTexture=null,this.emissiveFactor=null,this.pbrMetallicRoughness=null}};(0,s._)([(0,c.J)({opaque:"opaque",mask:"mask",blend:"blend"})],y.prototype,"alphaMode",void 0),(0,s._)([(0,f.Cb)({type:Number})],y.prototype,"alphaCutoff",void 0),(0,s._)([(0,f.Cb)({type:Boolean})],y.prototype,"doubleSided",void 0),(0,s._)([(0,c.J)({none:"none",back:"back",front:"front"})],y.prototype,"cullFace",void 0),(0,s._)([(0,f.Cb)({type:p})],y.prototype,"normalTexture",void 0),(0,s._)([(0,f.Cb)({type:p})],y.prototype,"occlusionTexture",void 0),(0,s._)([(0,f.Cb)({type:p})],y.prototype,"emissiveTexture",void 0),(0,s._)([(0,f.Cb)({type:[Number]})],y.prototype,"emissiveFactor",void 0),(0,s._)([(0,f.Cb)({type:o})],y.prototype,"pbrMetallicRoughness",void 0),y=(0,s._)([(0,a.j)("esri.layer.support.I3SMaterialDefinition")],y);let E=class extends i.wq{};(0,s._)([(0,f.Cb)({type:String,json:{read:{source:["name","index"],reader:(l,d)=>null!=l?l:`${d.index}`}}})],E.prototype,"name",void 0),(0,s._)([(0,c.J)({jpg:"jpg",png:"png",dds:"dds","ktx-etc2":"ktx-etc2",ktx2:"ktx2",basis:"basis"})],E.prototype,"format",void 0),E=(0,s._)([(0,a.j)("esri.layer.support.I3STextureFormat")],E);let _=class extends i.wq{constructor(){super(...arguments),this.atlas=!1}};(0,s._)([(0,f.Cb)({type:[E]})],_.prototype,"formats",void 0),(0,s._)([(0,f.Cb)({type:Boolean})],_.prototype,"atlas",void 0),_=(0,s._)([(0,a.j)("esri.layer.support.I3STextureSetDefinition")],_);let r=class extends i.wq{};(0,s._)([(0,c.J)({Float32:"Float32",UInt64:"UInt64",UInt32:"UInt32",UInt16:"UInt16",UInt8:"UInt8"})],r.prototype,"type",void 0),(0,s._)([(0,f.Cb)({type:Number})],r.prototype,"component",void 0),r=(0,s._)([(0,a.j)("esri.layer.support.I3SGeometryAttribute")],r);let v=class extends i.wq{};(0,s._)([(0,c.J)({draco:"draco"})],v.prototype,"encoding",void 0),(0,s._)([(0,f.Cb)({type:[String]})],v.prototype,"attributes",void 0),v=(0,s._)([(0,a.j)("esri.layer.support.I3SGeometryCompressedAttributes")],v);let O=class extends i.wq{constructor(){super(...arguments),this.offset=0}};(0,s._)([(0,f.Cb)({type:Number})],O.prototype,"offset",void 0),(0,s._)([(0,f.Cb)({type:r})],O.prototype,"position",void 0),(0,s._)([(0,f.Cb)({type:r})],O.prototype,"normal",void 0),(0,s._)([(0,f.Cb)({type:r})],O.prototype,"uv0",void 0),(0,s._)([(0,f.Cb)({type:r})],O.prototype,"color",void 0),(0,s._)([(0,f.Cb)({type:r})],O.prototype,"uvRegion",void 0),(0,s._)([(0,f.Cb)({type:r})],O.prototype,"featureId",void 0),(0,s._)([(0,f.Cb)({type:r})],O.prototype,"faceRange",void 0),(0,s._)([(0,f.Cb)({type:v})],O.prototype,"compressedAttributes",void 0),O=(0,s._)([(0,a.j)("esri.layer.support.I3SGeometryBuffer")],O);let m=class extends i.wq{};(0,s._)([(0,c.J)({triangle:"triangle"})],m.prototype,"topology",void 0),(0,s._)([(0,f.Cb)()],m.prototype,"geometryBuffers",void 0),m=(0,s._)([(0,a.j)("esri.layer.support.I3SGeometryDefinition")],m)},28930:(V,x,e)=>{e.d(x,{y:()=>j});var b,s=e(15861),i=e(17626),f=e(84792),I=e(14517),A=e(27306),P=e(26584),c=e(80542),a=e(63290),T=e(93961),p=e(77029),o=e(10699),y=e(32917),E=e(50618),_=e(21726),r=e(77712),v=e(85931),m=(e(8314),e(66656)),l=e(76898),d=e(58817);class g{constructor(){this.location={left:0,top:0,width:0,height:0},this._allAvailability="unknown",this.byteSize=40}getAvailability(U,R){if("unknown"!==this._allAvailability)return this._allAvailability;const S=(U-this.location.top)*this.location.width+(R-this.location.left),G=S>>3,K=this._tileAvailabilityBitSet;return G<0||G>K.length?"unknown":K[G]&1<<S%8?"available":"unavailable"}_updateFromData(U){let W=!0,G=!0;const K=Math.ceil(this.location.width*this.location.height/8),z=new Uint8Array(K);let F=0;for(let w=0;w<U.length;w++){const Q=w%8;U[w]?(G=!1,z[F]|=1<<Q):W=!1,7===Q&&++F}G?this._allAvailability="unavailable":W?this._allAvailability="available":(this._allAvailability="unknown",this._tileAvailabilityBitSet=z,this.byteSize+=z.length)}static fromDefinition(U,R){const S=U.service.request||f.default,{row:W,col:G,width:K,height:z}=U,F={query:{f:"json"}};return R=R?X(X({},F),R):F,S(function M(C){let U;if("vector-tile"===C.service.type)U=`${C.service.url}/tilemap/${C.level}/${C.row}/${C.col}/${C.width}/${C.height}`;else{const S=C.service.tileServers;U=`${S&&S.length?S[C.row%S.length]:C.service.url}/tilemap/${C.level}/${C.row}/${C.col}/${C.width}/${C.height}`}const R=C.service.query;return R&&(U=`${U}?${R}`),U}(U),R).then(w=>w.data).catch(w=>{if(w&&w.details&&422===w.details.httpStatus)return{location:{top:W,left:G,width:K,height:z},valid:!0,data:(0,v.a9)(K*z,0)};throw w}).then(w=>{if(w.location&&(w.location.top!==W||w.location.left!==G||w.location.width!==K||w.location.height!==z))throw new P.Z("tilemap:location-mismatch","Tilemap response for different location than requested",{response:w,definition:{top:W,left:G,width:K,height:z}});return g.fromJSON(w)})}static fromJSON(U){g._validateJSON(U);const R=new g;return R.location=Object.freeze((0,d.d9)(U.location)),R._updateFromData(U.data),Object.freeze(R)}static _validateJSON(U){if(!U||!U.location)throw new P.Z("tilemap:missing-location","Location missing from tilemap response");if(!1===U.valid)throw new P.Z("tilemap:invalid","Tilemap response was marked as invalid");if(!U.data)throw new P.Z("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(U.data))throw new P.Z("tilemap:data-mismatch","Data must be an array of numbers");if(U.data.length!==U.location.width*U.location.height)throw new P.Z("tilemap:data-mismatch","Number of data items does not match width/height of tilemap")}}function L(C){return`${C.level}/${C.row}/${C.col}/${C.width}/${C.height}`}const N=a.Z.getLogger("esri.layers.support.TilemapCache");let j=b=class extends((0,c.p)(I.Z)){constructor(C){super(C),this._pendingTilemapRequests={},this._availableLevels={},this.levels=5,this.cacheByteSize=2*A.Y8.MEGABYTES,this.request=f.default,this._prefetchingEnabled=!0}initialize(){this._tilemapCache=new T.Z(this.cacheByteSize),this.handles.add([this.watch(["layer.parsedUrl","layer.tileServers?","layer.apiKey?","layer.customParameters?"],()=>this._initializeTilemapDefinition()),(0,y.YP)(()=>{var C,U;return null==(C=this.layer)||null==(U=C.tileInfo)?void 0:U.lods},C=>this._initializeAvailableLevels(C),y.tX)]),this._initializeTilemapDefinition()}castLevels(C){return C<=2?(N.error("Minimum levels for Tilemap is 3, but got ",C),3):C}get size(){return 1<<this.levels}fetchTilemap(C,U,R,S){if(!this._availableLevels[C])return Promise.reject(new P.Z("tilemap-cache:level-unavailable",`Level ${C} is unavailable in the service`));const W=this._tmpTilemapDefinition,G=this._tilemapFromCache(C,U,R,W);if(G)return Promise.resolve(G);const K=S&&S.signal;return S=se(X({},S),{signal:null}),new Promise((z,F)=>{(0,o.fu)(K,()=>F((0,o.zE)()));const w=L(W);let Q=this._pendingTilemapRequests[w];if(!Q){Q=g.fromDefinition(W,S).then(re=>(this._tilemapCache.put(w,re,re.byteSize),re));const H=()=>delete this._pendingTilemapRequests[w];this._pendingTilemapRequests[w]=Q,Q.then(H,H)}Q.then(z,F)})}getAvailability(C,U,R){if(!this._availableLevels[C])return"unavailable";const S=this._tilemapFromCache(C,U,R,this._tmpTilemapDefinition);return S?S.getAvailability(U,R):"unknown"}fetchAvailability(C,U,R,S){return this._availableLevels[C]?this.fetchTilemap(C,U,R,S).catch(W=>W).then(W=>{if(W instanceof g){const G=W.getAvailability(U,R);return"unavailable"===G?Promise.reject(new P.Z("tile-map:tile-unavailable","Tile is not available",{level:C,row:U,col:R})):G}if((0,o.D_)(W))throw W;return"unknown"}):Promise.reject(new P.Z("tilemap-cache:level-unavailable",`Level ${C} is unavailable in the service`))}fetchAvailabilityUpsample(C,U,R,S,W){S.level=C,S.row=U,S.col=R;const G=this.layer.tileInfo;G.updateTileInfo(S);const K=this.fetchAvailability(C,U,R,W).catch(z=>{if((0,o.D_)(z))throw z;if(G.upsampleTile(S))return this.fetchAvailabilityUpsample(S.level,S.row,S.col,S);throw z});return this._fetchAvailabilityUpsamplePrefetch(S.id,C,U,R,W,K),K}_fetchAvailabilityUpsamplePrefetch(C,U,R,S,W,G){var K=this;return(0,s.Z)(function*(){if(!K._prefetchingEnabled)return;const z=`prefetch-${C}`;if(K.handles.has(z))return;const F=new AbortController;G.then(()=>F.abort(),()=>F.abort());let w=!1;if(K.handles.add({remove(){w||(w=!0,F.abort())}},z),yield(0,E.MU)(10,F.signal).catch(()=>{}),w||(w=!0,K.handles.remove(z)),(0,o.Hc)(F))return;const H={id:C,level:U,row:R,col:S},re=se(X({},W),{signal:F.signal}),h=K.layer.tileInfo;for(let D=0;b._prefetches.length<b._maxPrefetch&&h.upsampleTile(H);++D){const B=K.fetchAvailability(H.level,H.row,H.col,re);b._prefetches.push(B);const Z=()=>{b._prefetches.removeUnordered(B)};B.then(Z,Z)}})()}_initializeTilemapDefinition(){var C;if(!this.layer.parsedUrl)return;const{parsedUrl:U,apiKey:R,customParameters:S}=this.layer;this._tilemapCache.clear(),this._tmpTilemapDefinition={service:{url:U.path,query:(0,_.B7)(se(X(X({},U.query),S),{token:null!=R?R:null==(C=U.query)?void 0:C.token})),tileServers:this.layer.tileServers,request:this.request,type:this.layer.type},width:this.size,height:this.size,level:0,row:0,col:0}}_tilemapFromCache(C,U,R,S){S.level=C,S.row=U-U%this.size,S.col=R-R%this.size;const W=L(S);return this._tilemapCache.get(W)}_initializeAvailableLevels(C){this._availableLevels={},C&&C.forEach(U=>this._availableLevels[U.level]=!0)}get test(){const C=this;return{get prefetchingEnabled(){return C._prefetchingEnabled},set prefetchingEnabled(U){C._prefetchingEnabled=U},hasTilemap:(U,R,S)=>!!C._tilemapFromCache(U,R,S,C._tmpTilemapDefinition)}}};j._maxPrefetch=4,j._prefetches=new p.Z({initialSize:b._maxPrefetch}),(0,i._)([(0,r.Cb)({constructOnly:!0,type:Number})],j.prototype,"levels",void 0),(0,i._)([(0,m.p)("levels")],j.prototype,"castLevels",null),(0,i._)([(0,r.Cb)({readOnly:!0,type:Number})],j.prototype,"size",null),(0,i._)([(0,r.Cb)({constructOnly:!0,type:Number})],j.prototype,"cacheByteSize",void 0),(0,i._)([(0,r.Cb)({constructOnly:!0})],j.prototype,"layer",void 0),(0,i._)([(0,r.Cb)({constructOnly:!0})],j.prototype,"request",void 0),j=b=(0,i._)([(0,l.j)("esri.layers.support.TilemapCache")],j)},91309:(V,x,e)=>{e.d(x,{Z:()=>T});var c,s=e(17626),i=e(86810),f=e(58817),I=e(77712),P=(e(90912),e(76898));let a=c=class extends i.wq{constructor(p){super(p)}clone(){return new c({customLayerParameters:(0,f.d9)(this.customLayerParameters),customParameters:(0,f.d9)(this.customParameters),layerIdentifier:this.layerIdentifier,tileMatrixSet:this.tileMatrixSet,url:this.url})}};(0,s._)([(0,I.Cb)({json:{type:Object,write:!0}})],a.prototype,"customLayerParameters",void 0),(0,s._)([(0,I.Cb)({json:{type:Object,write:!0}})],a.prototype,"customParameters",void 0),(0,s._)([(0,I.Cb)({type:String,json:{write:!0}})],a.prototype,"layerIdentifier",void 0),(0,s._)([(0,I.Cb)({type:String,json:{write:!0}})],a.prototype,"tileMatrixSet",void 0),(0,s._)([(0,I.Cb)({type:String,json:{write:!0}})],a.prototype,"url",void 0),a=c=(0,s._)([(0,P.j)("esri.layer.support.WMTSLayerInfo")],a);const T=a},59787:(V,x,e)=>{e.d(x,{C:()=>s});const s={attachment:{supportsContentType:!1,supportsExifInfo:!1,supportsKeywords:!1,supportsName:!1,supportsSize:!1},data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:!1},editing:{supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsGeometryUpdate:!1,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:!1,supportsDelete:!1,supportsEditing:!1,supportsChangeTracking:!1,supportsQuery:!1,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:!1,supportsExceedsLimitStatistics:!1},queryRelated:{supportsCount:!1,supportsOrderBy:!1,supportsPagination:!1},query:{maxRecordCount:0,maxRecordCountFactor:0,standardMaxRecordCount:0,supportsCacheHint:!1,supportsCentroid:!1,supportsCompactGeometry:!1,supportsDefaultSpatialReference:!1,supportsDisjointSpatialRelationship:!1,supportsDistance:!1,supportsDistinct:!1,supportsExtent:!1,supportsFormatPBF:!1,supportsGeometryProperties:!1,supportsHavingClause:!1,supportsHistoricMoment:!1,supportsMaxRecordCountFactor:!1,supportsOrderBy:!1,supportsPagination:!1,supportsPercentileStatistics:!1,supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryByOthers:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsSqlExpression:!1,supportsStandardizedQueriesOnly:!1,supportsTopFeaturesQuery:!1,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsStatistics:!1,tileMaxRecordCount:0}}},98686:(V,x,e)=>{e.d(x,{CS:()=>r,Cw:()=>_,Yu:()=>d,j5:()=>v,lm:()=>L});var s=e(15861),i=e(59318),f=e(24263),I=e(73281),A=e(84792),P=e(58817),c=e(21726),a=e(65234),T=e(5548),p=e(32442),o=e(33474),y=e(17253);const E={esriGeometryPoint:"points",esriGeometryPolyline:"polylines",esriGeometryPolygon:"polygons"};function _(M){const b=M.folders||[],N=b.slice(),j=new Map,C=new Map,U=new Map,R=new Map,S=new Map,W={esriGeometryPoint:C,esriGeometryPolyline:U,esriGeometryPolygon:R};(M.featureCollection&&M.featureCollection.layers||[]).forEach(K=>{const z=(0,P.d9)(K);z.featureSet.features=[];const F=K.featureSet.geometryType;j.set(F,z);const w=K.layerDefinition.objectIdField;"esriGeometryPoint"===F?O(C,w,K.featureSet.features):"esriGeometryPolyline"===F?O(U,w,K.featureSet.features):"esriGeometryPolygon"===F&&O(R,w,K.featureSet.features)}),M.groundOverlays&&M.groundOverlays.forEach(K=>{S.set(K.id,K)}),b.forEach(K=>{K.networkLinkIds.forEach(z=>{const F=function l(M,b,N){const j=function m(M,b){let N;return b.some(j=>j.id===M&&(N=j,!0)),N}(M,N);return j&&(j.parentFolderId=b,j.networkLink=j),j}(z,K.id,M.networkLinks);F&&N.push(F)})}),N.forEach(K=>{if(K.featureInfos){K.points=(0,P.d9)(j.get("esriGeometryPoint")),K.polylines=(0,P.d9)(j.get("esriGeometryPolyline")),K.polygons=(0,P.d9)(j.get("esriGeometryPolygon")),K.mapImages=[];for(const z of K.featureInfos)switch(z.type){case"esriGeometryPoint":case"esriGeometryPolyline":case"esriGeometryPolygon":{const F=W[z.type].get(z.id);F&&K[E[z.type]].featureSet.features.push(F);break}case"GroundOverlay":{const F=S.get(z.id);F&&K.mapImages.push(F);break}}K.fullExtent=L([K])}});const G=L(N);return{folders:b,sublayers:N,extent:G}}function r(M,b,N,j){const C=f.id&&f.id.findCredential(M);return M=(0,c.fl)(M,{token:C&&C.token}),(0,A.default)(i.Z.kmlServiceUrl,{query:{url:M,model:"simple",folders:"",refresh:0!==N||void 0,outSR:JSON.stringify(b)},responseType:"json",signal:j})}function v(M,b,N=null,j=[]){const C=[],U={},R=b.sublayers,S=b.folders.map(W=>W.id);return R.forEach(W=>{const G=new M;if(N?G.read(W,N):G.read(W),j.length&&S.indexOf(G.id)>-1&&(G.visible=-1!==j.indexOf(G.id)),U[W.id]=G,null!=W.parentFolderId&&-1!==W.parentFolderId){const K=U[W.parentFolderId];K.sublayers||(K.sublayers=[]),K.sublayers.unshift(G)}else C.unshift(G)}),C}function O(M,b,N){N.forEach(j=>{M.set(j.attributes[b],j)})}function d(M){return g.apply(this,arguments)}function g(){return(g=(0,s.Z)(function*(M){const b=y.default.fromJSON(M.featureSet).features,j=(0,o.i)(M.layerDefinition.drawingInfo.renderer),C=I.Z.fromJSON(M.popupInfo),U=[];for(const R of b){const S=yield j.getSymbolAsync(R);R.symbol=S,R.popupTemplate=C,R.visible=!0,U.push(R)}return U})).apply(this,arguments)}function L(M){const b=(0,T.Ue)(T.Gv),N=(0,T.Ue)(T.Gv);for(const j of M){if(j.polygons&&j.polygons.featureSet&&j.polygons.featureSet.features)for(const C of j.polygons.featureSet.features)(0,p.Yg)(b,C.geometry),(0,T.TC)(N,b);if(j.polylines&&j.polylines.featureSet&&j.polylines.featureSet.features)for(const C of j.polylines.featureSet.features)(0,p.Yg)(b,C.geometry),(0,T.TC)(N,b);if(j.points&&j.points.featureSet&&j.points.featureSet.features)for(const C of j.points.featureSet.features)(0,p.Yg)(b,C.geometry),(0,T.TC)(N,b);if(j.mapImages)for(const C of j.mapImages)(0,p.Yg)(b,C.extent),(0,T.TC)(N,b)}return(0,T.fS)(N,T.Gv)?null:{xmin:N[0],ymin:N[1],zmin:N[2],xmax:N[3],ymax:N[4],zmax:N[5],spatialReference:a.Z.WGS84}}},61068:(V,x,e)=>{e.d(x,{OE:()=>y,Gc:()=>r,Qg:()=>E,Rq:()=>a,gX:()=>_,z2:()=>T,ET:()=>p,Vx:()=>O}),e(29132);var i=e(62208),I=e(28594),A=e(49672);const P=new Map,c=new class f{constructor(l=15e3,d=5e3){this._timer=null,this._cachedBlocks=new Map,this._size=-1,this._duration=l,this._interval=Math.min(l,d)}decreaseRefCount(l,d){const g=l+"/"+d,L=this._cachedBlocks;if(L.has(g)){const M=L.get(g);return M.refCount--,M.refCount<=0&&(L.delete(g),M.controller&&M.controller.abort()),M.refCount}return 0}getBlock(l,d){const g=l+"/"+d,L=this._cachedBlocks;if(L.has(g)){const M=L.get(g);return M.ts=Date.now(),M.refCount++,L.delete(g),L.set(g,M),M.block}return null}putBlock(l,d,g,L=null){const M=this._cachedBlocks,b=l+"/"+d;if(M.has(b)){const N=M.get(b);N.ts=Date.now(),N.refCount++}else M.set(b,{block:g,ts:Date.now(),refCount:1,controller:L});this._trim(),this._updateTimer()}deleteBlock(l,d){const g=this._cachedBlocks,L=l+"/"+d;g.has(L)&&g.delete(L)}updateMaxSize(l){this._size=l,this._trim()}empty(){this._cachedBlocks.clear(),this._clearTimer()}getCurrentSize(){return this._cachedBlocks.size}_updateTimer(){if(null!=this._timer)return;const l=this._cachedBlocks;this._timer=setInterval(()=>{const d=Array.from(l),g=Date.now();for(let L=0;L<d.length&&d[L][1].ts<=g-this._duration;L++)l.delete(d[L][0]);0===l.size&&this._clearTimer()},this._interval)}_trim(){const l=this._cachedBlocks;if(-1===this._size||this._size>=l.size)return;const d=Array.from(l);for(let g=0;g<d.length-this._size;g++)l.delete(d[g][0])}_clearTimer(){null!=this._timer&&(clearInterval(this._timer),this._timer=null)}};function a(m,l){return null==l?m:`${m}?sliceId=${l}`}function T(m,l){const d={extent:null,rasterInfo:l,cache:new Map};if(P.has(m)){const g=P.get(m);return g.push(d),g.length-1}return P.set(m,[d]),0}function p(m,l){if(P.has(m)){const d=P.get(m);d[l]=null,d.some(g=>null!=g)||P.delete(m)}}function y(m,l,d){if(!P.has(m))return null==l?c.decreaseRefCount(m,d):0;const g=P.get(m);if(null==g[l])return c.decreaseRefCount(m,d);const L=g[l].cache;if(L.has(d)){const M=L.get(d);if(M.refCount--,0===M.refCount){L.delete(d);for(let b=0;b<g.length;b++)g[b]&&g[b].cache.has(d)&&g[b].cache.delete(d);M.controller&&M.controller.abort()}return M.refCount}return 0}function E(m,l,d){if(!P.has(m))return null==l?c.getBlock(m,d):null;const g=P.get(m);if(null==g[l]){for(let M=0;M<g.length;M++)if(g[M]&&g[M].cache.has(d)){const b=g[M].cache.get(d);return b.refCount++,b.block}return c.getBlock(m,d)}const L=g[l].cache;if(L.has(d)){const M=L.get(d);return M.refCount++,M.block}for(let M=0;M<g.length;M++)if(M!==l&&g[M]&&g[M]&&g[M].cache.has(d)){const b=g[M].cache.get(d);return b.refCount++,L.set(d,b),b.block}return null}function _(m,l,d,g,L=null){if(!P.has(m))return void(null==l&&c.putBlock(m,d,g,L));const M=P.get(m);if(null==M[l])return void c.putBlock(m,d,g,L);const b={refCount:1,block:g,isResolved:!1,isRejected:!1,controller:L};g.then(()=>b.isResolved=!0).catch(()=>b.isRejected=!0),M[l].cache.set(d,b)}function r(m,l,d){if(!P.has(m))return void(null==l&&c.deleteBlock(m,d));const g=P.get(m);null!=g[l]?g[l].cache.delete(d):c.deleteBlock(m,d)}function O(m,l,d,g,L,M,b=null){const N=function v(m,l){if(!P.has(m))return null;const d=P.get(m);return null==d[l]?null:d[l]}(m,l),j=N.extent,{cache:C,rasterInfo:U}=N;if(j&&j.xmin===d.xmin&&j.xmax===d.xmax&&j.ymin===d.ymin&&j.ymax===d.ymax)return;const R=d.clone().normalize(),{spatialReference:S,transform:W}=U,G=new Set;for(let K=0;K<R.length;K++){const z=R[K];if(z.xmax-z.xmin<=g||z.ymax-z.ymin<=g)continue;let F=(0,I.tB)(z,S,b);(0,i.pC)(W)&&(F=W.inverseTransform(F));const w=new A.Z({x:g,y:g,spatialReference:z.spatialReference});if(null==L&&!(L=(0,I.VO)(w,S,z,b)))return;const{pyramidLevel:Q,pyramidResolution:H,excessiveReading:re}=(0,I.kr)(L,U,M||"closest");if(re)return;const{storageInfo:h}=U,{origin:D}=h,B={x:Math.max(0,Math.floor((F.xmin-D.x)/H.x)),y:Math.max(0,Math.floor((D.y-F.ymax)/H.y))},Z=Math.ceil((F.xmax-F.xmin)/H.x-.1),$=Math.ceil((F.ymax-F.ymin)/H.y-.1),q=Q>0?h.pyramidBlockWidth:h.blockWidth,k=Q>0?h.pyramidBlockHeight:h.blockHeight,ne=1,oe=Math.max(0,Math.floor(B.x/q)-ne),J=Math.max(0,Math.floor(B.y/k)-ne),Y=Math.floor((B.x+Z-1)/q)+ne,te=Math.floor((B.y+$-1)/k)+ne;for(let ee=J;ee<=te;ee++)for(let ie=oe;ie<=Y;ie++)G.add(`${Q}/${ee}/${ie}`)}C.forEach((K,z)=>{if(!G.has(z)){const F=C.get(z);(null==F||F.isResolved||F.isRejected)&&C.delete(z)}}),N.extent={xmin:d.xmin,ymin:d.ymin,xmax:d.xmax,ymax:d.ymax}}},96504:(V,x,e)=>{e.d(x,{Z:()=>T});var s=e(17626),i=e(86810),f=e(77712),c=(e(85931),e(8314),e(90912),e(76898));let a=class extends i.wq{get affectsPixelSize(){return!1}forwardTransform(p){return p}inverseTransform(p){return p}};(0,s._)([(0,f.Cb)()],a.prototype,"affectsPixelSize",null),(0,s._)([(0,f.Cb)({json:{write:!0}})],a.prototype,"spatialReference",void 0),a=(0,s._)([(0,c.j)("esri.layers.support.rasterTransforms.BaseRasterTransform")],a);const T=a},76671:(V,x,e)=>{e.d(x,{Z:()=>p});var s=e(17626),i=e(77712),P=(e(85931),e(8314),e(90912),e(55342)),c=e(76898),a=e(96504);let T=class extends a.Z{constructor(){super(...arguments),this.type="gcs-shift",this.tolerance=1e-8}forwardTransform(o){return"point"===(o=o.clone()).type?(o.x>180+this.tolerance&&(o.x-=360),o):(o.xmin>=180-this.tolerance?(o.xmax-=360,o.xmin-=360):o.xmax>180+this.tolerance&&(o.xmin=-180,o.xmax=180),o)}inverseTransform(o){return"point"===(o=o.clone()).type?(o.x<-this.tolerance&&(o.x+=360),o):(o.xmin<-this.tolerance&&(o.xmin+=360,o.xmax+=360),o)}};(0,s._)([(0,P.J)({GCSShiftXform:"gcs-shift"})],T.prototype,"type",void 0),(0,s._)([(0,i.Cb)()],T.prototype,"tolerance",void 0),T=(0,s._)([(0,c.j)("esri.layers.support.rasterTransforms.GCSShiftTransform")],T);const p=T},85374:(V,x,e)=>{e.d(x,{Z:()=>m});var s=e(17626),f=(e(29132),e(77712)),c=(e(85931),e(8314),e(90912),e(55342)),a=e(68653),T=e(76898),p=e(99433),o=e(96504),y=e(49672),E=e(2004);function _(l,d,g){const{x:L,y:M}=d;if(g<2)return{x:l[0]+L*l[2]+M*l[4],y:l[1]+L*l[3]+M*l[5]};if(2===g){const W=L*L,G=M*M,K=L*M;return{x:l[0]+L*l[2]+M*l[4]+W*l[6]+K*l[8]+G*l[10],y:l[1]+L*l[3]+M*l[5]+W*l[7]+K*l[9]+G*l[11]}}const b=L*L,N=M*M,j=L*M,C=b*L,U=b*M,R=L*N,S=M*N;return{x:l[0]+L*l[2]+M*l[4]+b*l[6]+j*l[8]+N*l[10]+C*l[12]+U*l[14]+R*l[16]+S*l[18],y:l[1]+L*l[3]+M*l[5]+b*l[7]+j*l[9]+N*l[11]+C*l[13]+U*l[15]+R*l[17]+S*l[19]}}function r(l,d,g){const{xmin:L,ymin:M,xmax:b,ymax:N,spatialReference:j}=d;let C=[];if(g<2)C.push({x:L,y:N}),C.push({x:b,y:N}),C.push({x:L,y:M}),C.push({x:b,y:M});else{let S=10;for(let W=0;W<S;W++)C.push({x:L,y:M+(N-M)*W/(S-1)}),C.push({x:b,y:M+(N-M)*W/(S-1)});S=8;for(let W=1;W<=S;W++)C.push({x:L+(b-L)*W/S,y:M}),C.push({x:L+(b-L)*W/S,y:N})}C=C.map(S=>_(l,S,g));const U=C.map(S=>S.x),R=C.map(S=>S.y);return new E.Z({xmin:Math.min.apply(null,U),xmax:Math.max.apply(null,U),ymin:Math.min.apply(null,R),ymax:Math.max.apply(null,R),spatialReference:j})}let O=class extends o.Z{constructor(){super(...arguments),this.polynomialOrder=1,this.type="polynomial"}readForwardCoefficients(l,d){const{coeffX:g,coeffY:L}=d;if(null==g||!g.length||null==L||!L.length||g.length!==L.length)return null;const M=[];for(let b=0;b<g.length;b++)M.push(g[b]),M.push(L[b]);return M}writeForwardCoefficients(l,d,g){const L=[],M=[];for(let b=0;b<(null==l?void 0:l.length);b++)b%2==0?L.push(l[b]):M.push(l[b]);d.coeffX=L,d.coeffY=M}get inverseCoefficients(){let l=this._get("inverseCoefficients");const d=this._get("forwardCoefficients");return!l&&d&&this.polynomialOrder<2&&(l=function v(l){const[d,g,L,M,b,N]=l,j=L*N-b*M,C=b*M-L*N;return[(b*g-d*N)/j,(L*g-d*M)/C,N/j,M/C,-b/j,-L/C]}(d)),l}set inverseCoefficients(l){this._set("inverseCoefficients",l)}readInverseCoefficients(l,d){const{inverseCoeffX:g,inverseCoeffY:L}=d;if(null==g||!g.length||null==L||!L.length||g.length!==L.length)return null;const M=[];for(let b=0;b<g.length;b++)M.push(g[b]),M.push(L[b]);return M}writeInverseCoefficients(l,d,g){const L=[],M=[];for(let b=0;b<(null==l?void 0:l.length);b++)b%2==0?L.push(l[b]):M.push(l[b]);d.inverseCoeffX=L,d.inverseCoeffY=M}get affectsPixelSize(){return this.polynomialOrder>0}forwardTransform(l){if("point"===l.type){const d=_(this.forwardCoefficients,l,this.polynomialOrder);return new y.Z({x:d.x,y:d.y,spatialReference:l.spatialReference})}return r(this.forwardCoefficients,l,this.polynomialOrder)}inverseTransform(l){if("point"===l.type){const d=_(this.inverseCoefficients,l,this.polynomialOrder);return new y.Z({x:d.x,y:d.y,spatialReference:l.spatialReference})}return r(this.inverseCoefficients,l,this.polynomialOrder)}};(0,s._)([(0,f.Cb)({json:{write:!0}})],O.prototype,"polynomialOrder",void 0),(0,s._)([(0,f.Cb)()],O.prototype,"forwardCoefficients",void 0),(0,s._)([(0,a.r)("forwardCoefficients",["coeffX","coeffY"])],O.prototype,"readForwardCoefficients",null),(0,s._)([(0,p.c)("forwardCoefficients")],O.prototype,"writeForwardCoefficients",null),(0,s._)([(0,f.Cb)({json:{write:!0}})],O.prototype,"inverseCoefficients",null),(0,s._)([(0,a.r)("inverseCoefficients",["inverseCoeffX","inverseCoeffY"])],O.prototype,"readInverseCoefficients",null),(0,s._)([(0,p.c)("inverseCoefficients")],O.prototype,"writeInverseCoefficients",null),(0,s._)([(0,f.Cb)()],O.prototype,"affectsPixelSize",null),(0,s._)([(0,c.J)({PolynomialXform:"polynomial"})],O.prototype,"type",void 0),O=(0,s._)([(0,T.j)("esri.layers.support.rasterTransforms.PolynomialTransform")],O);const m=O},46572:(V,x,e)=>{e.d(x,{j:()=>v,c:()=>O});var s=e(76671),i=e(17626),a=(e(63290),e(90912),e(85931),e(8314),e(82255),e(55342)),T=e(76898),p=e(96504);let o=class extends p.Z{constructor(){super(...arguments),this.type="identity"}};(0,i._)([(0,a.J)({IdentityXform:"identity"})],o.prototype,"type",void 0),o=(0,i._)([(0,T.j)("esri.layers.support.rasterTransforms.IdentityTransform")],o);const y=o;var E=e(85374);const _={GCSShiftXform:s.Z,IdentityXform:y,PolynomialXform:E.Z},r=Object.keys(_);function v(m){return!m||r.includes(null==m?void 0:m.type)}function O(m){if(!(null==m?void 0:m.type))return null;const l=_[null==m?void 0:m.type];if(l){const d=new l;return d.read(m),d}return null}},51026:(V,x,e)=>{e.d(x,{d:()=>f,h:()=>i});var s=e(2584);const i={type:s.Z,json:{origins:{service:{read:{source:["tileInfo","minScale","maxScale","minLOD","maxLOD"],reader:f}}}}};function f(I,A,P,c){if(!I)return null;const{minScale:a,maxScale:T,minLOD:p,maxLOD:o}=A;if(null!=p&&null!=o)return s.Z.fromJSON(c&&c.ignoreMinMaxLOD?I:se(X({},I),{lods:I.lods.filter(({level:y})=>null!=y&&y>=p&&y<=o)}));if(0!==a&&0!==T){const y=r=>Math.round(1e4*r)/1e4,E=a?y(a):1/0,_=T?y(T):-1/0;return s.Z.fromJSON(se(X({},I),{lods:I.lods.filter(r=>{const v=y(r.scale);return v<=E&&v>=_})}))}return s.Z.fromJSON(I)}},53776:(V,x,e)=>{e.d(x,{Z:()=>v});var o,s=e(17626),i=e(58817),f=e(77712),I=e(90912),A=e(55342),P=e(76898),c=e(80573),a=e(10914),T=e(91558),p=e(86810);let y=o=class extends p.wq{constructor(){super(...arguments),this.description=null,this.label=null,this.minValue=0,this.maxValue=0,this.color=null}clone(){return new o({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,color:(0,i.d9)(this.color)})}};(0,s._)([(0,f.Cb)({type:String,json:{write:!0}})],y.prototype,"description",void 0),(0,s._)([(0,f.Cb)({type:String,json:{write:!0}})],y.prototype,"label",void 0),(0,s._)([(0,f.Cb)({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],y.prototype,"minValue",void 0),(0,s._)([(0,f.Cb)({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],y.prototype,"maxValue",void 0),(0,s._)([(0,f.Cb)({type:T.Z,json:{type:[I.z8],write:!0}})],y.prototype,"color",void 0),y=o=(0,s._)([(0,P.j)("esri.renderers.support.pointCloud.ColorClassBreakInfo")],y);const E=y;var _;let r=_=class extends c.Z{constructor(O){super(O),this.type="point-cloud-class-breaks",this.field=null,this.legendOptions=null,this.fieldTransformType=null,this.colorClassBreakInfos=null}clone(){return new _(se(X({},this.cloneProperties()),{field:this.field,fieldTransformType:this.fieldTransformType,colorClassBreakInfos:(0,i.d9)(this.colorClassBreakInfos),legendOptions:(0,i.d9)(this.legendOptions)}))}};(0,s._)([(0,A.J)({pointCloudClassBreaksRenderer:"point-cloud-class-breaks"})],r.prototype,"type",void 0),(0,s._)([(0,f.Cb)({json:{write:!0},type:String})],r.prototype,"field",void 0),(0,s._)([(0,f.Cb)({type:a.Z,json:{write:!0}})],r.prototype,"legendOptions",void 0),(0,s._)([(0,f.Cb)({type:c.Z.fieldTransformTypeKebabDict.apiValues,json:{type:c.Z.fieldTransformTypeKebabDict.jsonValues,read:c.Z.fieldTransformTypeKebabDict.read,write:c.Z.fieldTransformTypeKebabDict.write}})],r.prototype,"fieldTransformType",void 0),(0,s._)([(0,f.Cb)({type:[E],json:{write:!0}})],r.prototype,"colorClassBreakInfos",void 0),r=_=(0,s._)([(0,P.j)("esri.renderers.PointCloudClassBreaksRenderer")],r);const v=r},80573:(V,x,e)=>{e.d(x,{Z:()=>j});var p,s=e(17626),i=e(2076),f=e(86810),I=e(58817),A=e(77712),c=(e(90912),e(76898));e(85931),e(8314);let o=p=class extends f.wq{constructor(){super(...arguments),this.field=null,this.minValue=0,this.maxValue=255}clone(){return new p({field:this.field,minValue:this.minValue,maxValue:this.maxValue})}};(0,s._)([(0,A.Cb)({type:String,json:{write:!0}})],o.prototype,"field",void 0),(0,s._)([(0,A.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],o.prototype,"minValue",void 0),(0,s._)([(0,A.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],o.prototype,"maxValue",void 0),o=p=(0,s._)([(0,c.j)("esri.renderers.support.pointCloud.ColorModulation")],o);const y=o,E=new i.X({pointCloudFixedSizeAlgorithm:"fixed-size",pointCloudSplatAlgorithm:"splat"});let _=class extends f.wq{};(0,s._)([(0,A.Cb)({type:E.apiValues,readOnly:!0,nonNullable:!0,json:{type:E.jsonValues,read:!1,write:E.write}})],_.prototype,"type",void 0),_=(0,s._)([(0,c.j)("esri.renderers.support.pointCloud.PointSizeAlgorithm")],_);const r=_;var O,v=e(55342);let m=O=class extends r{constructor(){super(...arguments),this.type="fixed-size",this.size=0,this.useRealWorldSymbolSizes=null}clone(){return new O({size:this.size,useRealWorldSymbolSizes:this.useRealWorldSymbolSizes})}};(0,s._)([(0,v.J)({pointCloudFixedSizeAlgorithm:"fixed-size"})],m.prototype,"type",void 0),(0,s._)([(0,A.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],m.prototype,"size",void 0),(0,s._)([(0,A.Cb)({type:Boolean,json:{write:!0}})],m.prototype,"useRealWorldSymbolSizes",void 0),m=O=(0,s._)([(0,c.j)("esri.renderers.support.pointCloud.PointSizeFixedSizeAlgorithm")],m);const l=m;var d;let g=d=class extends r{constructor(){super(...arguments),this.type="splat",this.scaleFactor=1}clone(){return new d({scaleFactor:this.scaleFactor})}};(0,s._)([(0,v.J)({pointCloudSplatAlgorithm:"splat"})],g.prototype,"type",void 0),(0,s._)([(0,A.Cb)({type:Number,value:1,nonNullable:!0,json:{write:!0}})],g.prototype,"scaleFactor",void 0),g=d=(0,s._)([(0,c.j)("esri.renderers.support.pointCloud.PointSizeSplatAlgorithm")],g);const M={key:"type",base:r,typeMap:{"fixed-size":l,splat:g}},b=(0,i.w)()({pointCloudClassBreaksRenderer:"point-cloud-class-breaks",pointCloudRGBRenderer:"point-cloud-rgb",pointCloudStretchRenderer:"point-cloud-stretch",pointCloudUniqueValueRenderer:"point-cloud-unique-value"});let N=class extends f.wq{constructor(C){super(C),this.type=void 0,this.pointSizeAlgorithm=null,this.colorModulation=null,this.pointsPerInch=10}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}cloneProperties(){return{pointSizeAlgorithm:(0,I.d9)(this.pointSizeAlgorithm),colorModulation:(0,I.d9)(this.colorModulation),pointsPerInch:(0,I.d9)(this.pointsPerInch)}}};(0,s._)([(0,A.Cb)({type:b.apiValues,readOnly:!0,nonNullable:!0,json:{type:b.jsonValues,read:!1,write:b.write}})],N.prototype,"type",void 0),(0,s._)([(0,A.Cb)({types:M,json:{write:!0}})],N.prototype,"pointSizeAlgorithm",void 0),(0,s._)([(0,A.Cb)({type:y,json:{write:!0}})],N.prototype,"colorModulation",void 0),(0,s._)([(0,A.Cb)({json:{write:!0},nonNullable:!0,type:Number})],N.prototype,"pointsPerInch",void 0),N=(0,s._)([(0,c.j)("esri.renderers.PointCloudRenderer")],N),(N||(N={})).fieldTransformTypeKebabDict=new i.X({none:"none",lowFourBit:"low-four-bit",highFourBit:"high-four-bit",absoluteValue:"absolute-value",moduloTen:"modulo-ten"});const j=N},23899:(V,x,e)=>{e.d(x,{Z:()=>y});var p,s=e(17626),i=e(58817),f=e(77712),A=(e(90912),e(55342)),P=e(76898),c=e(80573),a=e(10914),T=e(8029);let o=p=class extends c.Z{constructor(E){super(E),this.type="point-cloud-stretch",this.field=null,this.legendOptions=null,this.fieldTransformType=null,this.stops=null}clone(){return new p(se(X({},this.cloneProperties()),{field:(0,i.d9)(this.field),fieldTransformType:(0,i.d9)(this.fieldTransformType),stops:(0,i.d9)(this.stops),legendOptions:(0,i.d9)(this.legendOptions)}))}};(0,s._)([(0,A.J)({pointCloudStretchRenderer:"point-cloud-stretch"})],o.prototype,"type",void 0),(0,s._)([(0,f.Cb)({json:{write:!0},type:String})],o.prototype,"field",void 0),(0,s._)([(0,f.Cb)({type:a.Z,json:{write:!0}})],o.prototype,"legendOptions",void 0),(0,s._)([(0,f.Cb)({type:c.Z.fieldTransformTypeKebabDict.apiValues,json:{type:c.Z.fieldTransformTypeKebabDict.jsonValues,read:c.Z.fieldTransformTypeKebabDict.read,write:c.Z.fieldTransformTypeKebabDict.write}})],o.prototype,"fieldTransformType",void 0),(0,s._)([(0,f.Cb)({type:[T.Z],json:{write:!0}})],o.prototype,"stops",void 0),o=p=(0,s._)([(0,P.j)("esri.renderers.PointCloudStretchRenderer")],o);const y=o},98610:(V,x,e)=>{e.d(x,{Z:()=>v});var o,s=e(17626),i=e(58817),f=e(77712),I=e(90912),A=e(55342),P=e(76898),c=e(80573),a=e(10914),T=e(91558),p=e(86810);let y=o=class extends p.wq{constructor(){super(...arguments),this.description=null,this.label=null,this.values=null,this.color=null}clone(){return new o({description:this.description,label:this.label,values:(0,i.d9)(this.values),color:(0,i.d9)(this.color)})}};(0,s._)([(0,f.Cb)({type:String,json:{write:!0}})],y.prototype,"description",void 0),(0,s._)([(0,f.Cb)({type:String,json:{write:!0}})],y.prototype,"label",void 0),(0,s._)([(0,f.Cb)({type:[String],json:{write:!0}})],y.prototype,"values",void 0),(0,s._)([(0,f.Cb)({type:T.Z,json:{type:[I.z8],write:!0}})],y.prototype,"color",void 0),y=o=(0,s._)([(0,P.j)("esri.renderers.support.pointCloud.ColorUniqueValueInfo")],y);const E=y;var _;let r=_=class extends c.Z{constructor(O){super(O),this.type="point-cloud-unique-value",this.field=null,this.fieldTransformType=null,this.colorUniqueValueInfos=null,this.legendOptions=null}clone(){return new _(se(X({},this.cloneProperties()),{field:(0,i.d9)(this.field),fieldTransformType:(0,i.d9)(this.fieldTransformType),colorUniqueValueInfos:(0,i.d9)(this.colorUniqueValueInfos),legendOptions:(0,i.d9)(this.legendOptions)}))}};(0,s._)([(0,A.J)({pointCloudUniqueValueRenderer:"point-cloud-unique-value"})],r.prototype,"type",void 0),(0,s._)([(0,f.Cb)({json:{write:!0},type:String})],r.prototype,"field",void 0),(0,s._)([(0,f.Cb)({type:c.Z.fieldTransformTypeKebabDict.apiValues,json:{type:c.Z.fieldTransformTypeKebabDict.jsonValues,read:c.Z.fieldTransformTypeKebabDict.read,write:c.Z.fieldTransformTypeKebabDict.write}})],r.prototype,"fieldTransformType",void 0),(0,s._)([(0,f.Cb)({type:[E],json:{write:!0}})],r.prototype,"colorUniqueValueInfos",void 0),(0,s._)([(0,f.Cb)({type:a.Z,json:{write:!0}})],r.prototype,"legendOptions",void 0),r=_=(0,s._)([(0,P.j)("esri.renderers.PointCloudUniqueValueRenderer")],r);const v=r},22264:(V,x,e)=>{function s(P,c){return c?"xoffset"in c&&c.xoffset?Math.max(P,Math.abs(c.xoffset)):"yoffset"in c&&c.yoffset?Math.max(P,Math.abs(c.yoffset||0)):P:P}function f(P,c){return"number"==typeof P?P:P&&P.stops&&P.stops.length?function i(P){let c=0,a=0;for(let T=0;T<P.length;T++){const p=P[T].size;"number"==typeof p&&(c+=p,a++)}return c/a}(P.stops):c}function A(P){const c=P&&P.renderer,a="touch"===(P&&P.event&&P.event.pointerType)?9:6;if(!c)return a;const T="visualVariables"in c?function I(P,c){if(!c)return P;const a=c.filter(y=>"size"===y.type).map(y=>{const{maxSize:E,minSize:_}=y;return(f(E,P)+f(_,P))/2});let T=0;const p=a.length;if(0===p)return P;for(let y=0;y<p;y++)T+=a[y];const o=Math.floor(T/p);return Math.max(o,P)}(a,c.visualVariables):a;if("simple"===c.type)return s(T,c.symbol);if("unique-value"===c.type){let p=T;return c.uniqueValueInfos.forEach(o=>{p=s(p,o.symbol)}),p}if("class-breaks"===c.type){let p=T;return c.classBreakInfos.forEach(o=>{p=s(p,o.symbol)}),p}return T}e.d(x,{k:()=>A})},36859:(V,x,e)=>{e.d(x,{QM:()=>I,hy:()=>A,uI:()=>i});var s=e(21286);const i=(()=>{if(!("document"in globalThis))return()=>null;const p=document.createElement("canvas"),o=p.getContext("2d");return p.height=512,p.width=1,E=>{o.clearRect(0,0,1,p.height);const _=o.createLinearGradient(0,0,0,p.height);for(const{ratio:r,color:v}of E)_.addColorStop(Math.max(r,.001),`rgba(${v.r}, ${v.g}, ${v.b}, ${v.a})`);return o.fillStyle=_,o.fillRect(0,0,1,p.height),o.getImageData(0,0,1,p.height).data}})();function I(p,o,y,E){const{blurRadius:_,fieldOffset:r,field:v}=o,O=new Float64Array(y*E),m=function c(p){const o=Math.round(3*p),y=2*p*p,E=new Float64Array(2*o+1);for(let _=0;_<=E.length;_++)E[_]=Math.exp(-((_-o)**2)/y)/Math.sqrt(2*Math.PI)*(p/2);return E}(_),l=Math.round(3*_);let d,g=Number.NEGATIVE_INFINITY;const L=function T(p,o){return null!=p?"string"==typeof o?y=>-1*+y.readAttribute(p):y=>+y.readAttribute(p)+o:y=>1}(v,r),M=new Set;for(const b of p){const N=b.getCursor();for(;N.next();){const j=N.getObjectId();if(M.has(j))continue;M.add(j);const C=N.readLegacyPointGeometry(),U=128;if(C.x<-U||C.x>=y+U||C.y<-U||C.y>E+U)continue;const R=+L(N),S=Math.round(C.x)-l,W=Math.round(C.y)-l,G=Math.max(0,S),K=Math.max(0,W),z=Math.min(E,Math.round(C.y)+l),F=Math.min(y,Math.round(C.x)+l);for(let w=K;w<z;w++){const Q=m[w-W];for(let H=G;H<F;H++)d=O[w*y+H]+=Q*m[H-S]*R,d>g&&(g=d)}}}return{matrix:O.buffer,max:g}}function A(p,o,y,E,_,r){p.canvas.width=p.canvas.height=o,p.clearRect(0,0,o,o);const v=p.getImageData(0,0,o,o);y&&E&&v.data.set(new Uint8ClampedArray(function P(p,o,y,E,_){const r=new Uint32Array(p*p),v="buffer"in o?o:new Float64Array(o),O="buffer"in y?new Uint32Array(y.buffer):new Uint32Array(new Uint8Array(y).buffer),m=O.length/(_-E);for(let l=0;l<v.length;l++){const g=Math.floor((v[l]-E)*m);r[l]=O[(0,s.uZ)(g,0,O.length-1)]}return r.buffer}(o,y,E,_,r))),p.putImageData(v,0,0)}},4969:(V,x,e)=>{e.d(x,{F:()=>C});var s=e(15861),i=e(84792),f=e(62208),I=e(38811),A=e(13924),P=e(15503),c=e(2618),a=e(17626),T=e(88879),p=e(86810),o=e(77712),r=(e(85931),e(8314),e(90912),e(68653)),v=e(76898),O=e(17253),m=e(12334),l=e(92383);let d=class extends p.wq{constructor(S){super(S),this.directionLines=null,this.directionPoints=null,this.directions=null,this.route=null,this.routeName=null,this.stops=null}};(0,a._)([(0,o.Cb)({type:O.default,json:{write:!0}})],d.prototype,"directionLines",void 0),(0,a._)([(0,o.Cb)({type:O.default,json:{write:!0}})],d.prototype,"directionPoints",void 0),(0,a._)([(0,o.Cb)({type:l.Z,json:{write:!0}})],d.prototype,"directions",void 0),(0,a._)([(0,o.Cb)({type:T.Z,json:{write:!0}})],d.prototype,"route",void 0),(0,a._)([(0,o.Cb)({type:String,json:{write:!0}})],d.prototype,"routeName",void 0),(0,a._)([(0,o.Cb)({type:[T.Z],json:{write:!0}})],d.prototype,"stops",void 0),d=(0,a._)([(0,v.j)("esri.rest.support.RouteResult")],d);const g=d;function L(S){return S&&O.default.fromJSON(S).features.map(W=>W)}let M=class extends p.wq{constructor(S){super(S),this.messages=null,this.pointBarriers=null,this.polylineBarriers=null,this.polygonBarriers=null,this.routeResults=null}readPointBarriers(S,W){return L(W.barriers)}readPolylineBarriers(S){return L(S)}readPolygonBarriers(S){return L(S)}};(0,a._)([(0,o.Cb)({type:[m.Z]})],M.prototype,"messages",void 0),(0,a._)([(0,o.Cb)({type:[T.Z]})],M.prototype,"pointBarriers",void 0),(0,a._)([(0,r.r)("pointBarriers",["barriers"])],M.prototype,"readPointBarriers",null),(0,a._)([(0,o.Cb)({type:[T.Z]})],M.prototype,"polylineBarriers",void 0),(0,a._)([(0,r.r)("polylineBarriers")],M.prototype,"readPolylineBarriers",null),(0,a._)([(0,o.Cb)({type:[T.Z]})],M.prototype,"polygonBarriers",void 0),(0,a._)([(0,r.r)("polygonBarriers")],M.prototype,"readPolygonBarriers",null),(0,a._)([(0,o.Cb)({type:[g]})],M.prototype,"routeResults",void 0),M=(0,a._)([(0,v.j)("esri.rest.support.RouteSolveResult")],M);const b=M,N=(0,I.E)({accumulateAttributes:{name:"accumulateAttributeNames"},attributeParameterValues:!0,directionsTimeAttribute:{name:"directionsTimeAttributeName"},impedanceAttribute:{name:"impedanceAttributeName"},outSpatialReference:{name:"outSR",getter:S=>S.outSpatialReference.wkid},pointBarriers:{name:"barriers"},polylineBarriers:!0,polygonBarriers:!0,restrictionAttributes:{name:"restrictionAttributeNames"},stops:!0,travelMode:!0});function j(S){return"esri.rest.support.FeatureSet"===(null==S?void 0:S.declaredClass)}function C(S,W,G){return U.apply(this,arguments)}function U(){return(U=(0,s.Z)(function*(S,W,G){const K=[],z=[],F={},w={},Q=(0,c.en)(S),{path:H}=Q;j(W.stops)&&(0,P.et)(W.stops.features,z,"stops.features",F),j(W.pointBarriers)&&(0,P.et)(W.pointBarriers.features,z,"pointBarriers.features",F),j(W.polylineBarriers)&&(0,P.et)(W.polylineBarriers.features,z,"polylineBarriers.features",F),j(W.polygonBarriers)&&(0,P.et)(W.polygonBarriers.features,z,"polygonBarriers.features",F);const re=yield(0,A.aX)(z);for(const Z in F){const $=F[Z];K.push(Z),w[Z]=re.slice($[0],$[1])}if((0,P.Wf)(w,K)){let Z=null;try{Z=yield(0,P.bI)(H,W.apiKey,G)}catch($){}Z&&!Z.hasZ&&(0,P.ef)(w,K)}for(const Z in w)w[Z].forEach(($,q)=>{W.get(Z)[q].geometry=$});const h=se(X({},G),{query:se(X(X({},Q.query),N.toQueryParams(W)),{f:"json"})}),D=H.endsWith("/solve")?H:`${H}/solve`,{data:B}=yield(0,i.default)(D,h);return R(B)})).apply(this,arguments)}function R(S){var W,G,K,z,F;const w=new Map,{directionLines:Q,directionPoints:H,directions:re,routes:h,stops:D,barriers:B,polygonBarriers:Z,polylineBarriers:$,messages:q}=S,k=null!=(W=null!=(G=null!=(K=null!=(z=null==h?void 0:h.spatialReference)?z:null==D?void 0:D.spatialReference)?K:null==B?void 0:B.spatialReference)?G:null==Z?void 0:Z.spatialReference)?W:null==$?void 0:$.spatialReference;null==h||h.features.forEach(J=>{const Y=J.attributes.Name,te=J.attributes.ObjectID;w.has(Y)?(w.get(Y).route=J,w.get(Y).routeId=te):w.set(Y,{route:J,routeId:te,routeName:Y}),(0,f.pC)(J.geometry)&&(J.geometry.spatialReference=k)}),null==re||re.forEach(J=>{const Y=J.routeName;w.has(Y)?w.get(Y).directions=J:w.set(Y,{routeName:Y,directions:J})}),null==D||D.features.forEach(J=>{var Y;const te=null!=(Y=J.attributes.RouteName)?Y:null;w.has(te)?w.get(te).stops?w.get(te).stops.push(J):w.get(te).stops=[J]:w.set(te,{stops:[J],routeName:te}),(0,f.pC)(J.geometry)&&(J.geometry.spatialReference=k)});const ne=null==(F=null==D?void 0:D.features.every(J=>null==J.attributes.RouteName))||F;if((null==D?void 0:D.features.length)>0&&ne){const J=Array.from(w.keys())[0];w.get(J).stops=w.get(null).stops,w.delete(null)}null==Q||Q.features.forEach(J=>{var Y;const te=J.attributes.RouteID,ee=null==(Y=Array.from(w.values()).find(ie=>ie.routeId===te))?void 0:Y.routeName;if(ee)if(w.has(ee))if(w.get(ee).directionLines)w.get(ee).directionLines.features.push(J);else{const{fieldAliases:ie,geometryType:ae,spatialReference:le}=Q;w.get(ee).directionLines={features:[J],fieldAliases:ie,geometryType:ae,spatialReference:le}}else{const{fieldAliases:ie,geometryType:ae,spatialReference:le}=Q;w.set(ee,{routeName:ee,directionLines:{features:[J],fieldAliases:ie,geometryType:ae,spatialReference:le}})}}),null==H||H.features.forEach(J=>{var Y;const te=J.attributes.RouteID,ee=null==(Y=Array.from(w.values()).find(ie=>ie.routeId===te))?void 0:Y.routeName;if(ee)if(w.has(ee))if(w.get(ee).directionPoints)w.get(ee).directionPoints.features.push(J);else{const{fieldAliases:ie,geometryType:ae,spatialReference:le}=H;w.get(ee).directionPoints={features:[J],fieldAliases:ie,geometryType:ae,spatialReference:le}}else{const{fieldAliases:ie,geometryType:ae,spatialReference:le}=H;w.set(ee,{routeName:ee,directionPoints:{features:[J],fieldAliases:ie,geometryType:ae,spatialReference:le}})}});const oe=Array.from(w.values());return b.fromJSON({routeResults:oe,barriers:B,polygonBarriers:Z,polylineBarriers:$,messages:q})}},70026:(V,x,e)=>{e.d(x,{t:()=>f});var s=e(15861),i=e(84792);function f(A,P){return I.apply(this,arguments)}function I(){return(I=(0,s.Z)(function*(A,P){const{data:c}=yield(0,i.default)(A,X({responseType:"image"},P));return c})).apply(this,arguments)}},32837:(V,x,e)=>{e.d(x,{Z:()=>P});var s=e(35909),i=e(31375),f=e(47139),I=e(80991);class P{constructor(a){this._resourceManager=a}dispose(){this._rasterizationCanvas=null}rasterizeJSONResource(a,T,p){if(this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas")),"simple-fill"===a.type||"esriSFS"===a.type){const[l,d,g]=s.fN.rasterizeSimpleFill(this._rasterizationCanvas,a.style,T);return{size:[d,g],image:new Uint32Array(l.buffer),sdf:!1,simplePattern:!0,anchorX:0,anchorY:0}}if("simple-line"===a.type||"esriSLS"===a.type||"line"===a.type&&a.dashTemplate){let l,d;if("simple-line"===a.type||"esriSLS"===a.type)switch(l=(0,s.U1)(a.style,a.cap),a.cap){case"butt":d="Butt";break;case"square":d="Square";break;default:d="Round"}else l=a.dashTemplate,d=a.cim.capStyle;const[g,L,M]=s.fN.rasterizeSimpleLine(l,d);return{size:[L,M],image:new Uint32Array(g.buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0}}let o,y,E;if("simple-marker"===a.type||"esriSMS"===a.type||"line-marker"===a.type?(o=s.B$.fromSimpleMarker(a),E=(0,f.Fp)(o)):a.cim&&"CIMHatchFill"===a.cim.type?(o=s.B$.fromCIMHatchFill(a.cim),y=new i.Z(o.frame.xmin,-o.frame.ymax,o.frame.xmax-o.frame.xmin,o.frame.ymax-o.frame.ymin)):a.cim.markerPlacement&&"CIMMarkerPlacementInsidePolygon"===a.cim.markerPlacement.type?(o=s.B$.fromCIMInsidePolygon(a.cim),y=new i.Z(o.frame.xmin,-o.frame.ymax,o.frame.xmax-o.frame.xmin,o.frame.ymax-o.frame.ymin)):(o=a.cim,E=(0,f.Fp)(o)),E&&!p){const[l,d,g]=(0,f.RL)(E);return l?{size:[d,g],image:new Uint32Array(l.buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0}:null}const[_,r,v,O,m]=s.B$.rasterize(this._rasterizationCanvas,o,y,this._resourceManager,!p);return _?{size:[r,v],image:new Uint32Array(_.buffer),sdf:!1,simplePattern:!1,anchorX:O,anchorY:m}:null}rasterizeImageResource(a,T,p,o){this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas")),this._rasterizationCanvas.width=a,this._rasterizationCanvas.height=T;const y=this._rasterizationCanvas.getContext("2d");p instanceof ImageData?y.putImageData(p,0,0):(p.setAttribute("width",`${a}px`),p.setAttribute("height",`${T}px`),y.drawImage(p,0,0,a,T));const E=y.getImageData(0,0,a,T),_=new Uint8Array(E.data);if(o)for(const d of o)if(d&&d.oldColor&&4===d.oldColor.length&&d.newColor&&4===d.newColor.length){const[g,L,M,b]=d.oldColor,[N,j,C,U]=d.newColor;if(g===N&&L===j&&M===C&&b===U)continue;for(let R=0;R<_.length;R+=4)g===_[R]&&L===_[R+1]&&M===_[R+2]&&b===_[R+3]&&(_[R]=N,_[R+1]=j,_[R+2]=C,_[R+3]=U)}let r;for(let d=0;d<_.length;d+=4)r=_[d+3]/255,_[d]=_[d]*r,_[d+1]=_[d+1]*r,_[d+2]=_[d+2]*r;let v=_,O=a,m=T;const l=512;if(O>=l||m>=l){const d=O/m;d>1?(O=l,m=Math.round(l/d)):(m=l,O=Math.round(l*d)),v=new Uint8Array(4*O*m);const g=new Uint8ClampedArray(v.buffer);(0,I.TT)(_,a,T,g,O,m,!1)}return{size:[O,m],image:new Uint32Array(v.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}}},50998:(V,x,e)=>{e.r(x),e.d(x,{fetchSymbolFromStyle:()=>y,resolveWebStyleSymbol:()=>o});var s=e(65787),i=e(83100),f=e(26584),I=e(21726),A=e(84687),P=e(29840),c=e(65270),a=e(77345),T=e(78241),p=e(96296);function o(_,r,v,O){return _.name?_.styleName&&"Esri2DPointSymbolsStyle"===_.styleName?function E(_,r,v){const O=T.wm.replace(/\{SymbolName\}/gi,_.name);return(0,T.EJ)(O,v).then(m=>{const l=(0,T.KV)(m.data);return(0,c.im)(l,{portal:r.portal,url:(0,I.mN)((0,I.Yd)(O)),origin:"portal-item"})})}(_,r,O):(0,T.n2)(_,r,O).then(m=>y(m,_.name,r,v,O)):Promise.reject(new f.Z("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference"))}function y(_,r,v,O,m){const l=_.data,d={portal:v&&v.portal||A.Z.getDefault(),url:(0,I.mN)(_.baseUrl),origin:"portal-item"},g=l.items.find(j=>j.name===r);if(!g)return Promise.reject(new f.Z("symbolstyleutils:symbol-name-not-found",`The symbol name '${r}' could not be found`,{symbolName:r}));let L=(0,P.f)((0,T.v9)(g,O),d),M=g.thumbnail&&g.thumbnail.href;const b=g.thumbnail&&g.thumbnail.imageData;(0,i.XO)()&&(L=(0,i.pJ)(L),M=(0,i.pJ)(M));const N={portal:v.portal,url:(0,I.mN)((0,I.Yd)(L)),origin:"portal-item"};return(0,T.EJ)(L,m).then(j=>{const C="cimRef"===O?(0,T.KV)(j.data):j.data,U=(0,c.im)(C,N);if(U&&(0,s.dU)(U)){if(M){const R=(0,P.f)(M,d);U.thumbnail=new p.p({url:R})}else b&&(U.thumbnail=new p.p({url:`data:image/png;base64,${b}`}));_.styleUrl?U.styleOrigin=new a.Z({portal:v.portal,styleUrl:_.styleUrl,name:r}):_.styleName&&(U.styleOrigin=new a.Z({portal:v.portal,styleName:_.styleName,name:r}))}return U})}},55746:(V,x,e)=>{e.d(x,{k:()=>y,p:()=>E});var s=e(65389),i=e(61885),I=(e(8314),e(62208)),A=e(76279),P=e(5548),c=e(16669),a=e(52397);function T(_,r){return _<<16|r}function p(_){return(4294901760&_)>>>16}function o(_){return 65535&_}const y={getObjectId:_=>_.getObjectId(),getAttributes:_=>_.readAttributes(),getAttribute:(_,r)=>_.readAttribute(r),cloneWithGeometry:(_,r)=>_,getGeometry:_=>_.readHydratedGeometry(),getCentroid:(_,r)=>_.readCentroid()};class E extends c.J{constructor(r,v,O){super(r,v),this.featureAdapter=y,this.events=new i.Z,this._featureSetsByInstance=new Map,this._objectIdToDisplayId=new Map,this._spatialIndexInvalid=!0,this._indexSearchCache=new s.Z(50),this._index=(0,A.r)(9,m=>({minX:this._storage.getXMin(m),minY:this._storage.getYMin(m),maxX:this._storage.getXMax(m),maxY:this._storage.getYMax(m)})),this._storage=v,this.mode=O}get storage(){return this._storage}get storeStatistics(){let r=0,v=0,O=0;return this.forEach(m=>{const l=m.readGeometry();l&&(v+=l.isPoint?1:l.lengths.reduce((d,g)=>d+g,0),O+=l.isPoint?1:l.lengths.length,r+=1)}),{featureCount:r,vertexCount:v,ringCount:O}}hasInstance(r){return this._featureSetsByInstance.has(r)}onTileData(r,v){if((0,I.Wi)(v.addOrUpdate))return v;if(v.addOrUpdate.attachStorage(this._storage),"snapshot"===this.mode){const m=v.addOrUpdate.getCursor();for(;m.next();){const l=m.getDisplayId();this.setComputedAttributes(this._storage,m,l,r.scale)}return v}this._featureSetsByInstance.set(v.addOrUpdate.instance,v.addOrUpdate);const O=v.addOrUpdate.getCursor();for(;O.next();)this._insertFeature(O,r.scale);return this._spatialIndexInvalid=!0,this.events.emit("changed"),v}search(r){this._rebuildIndex();const v=r.id,O=this._indexSearchCache.find(g=>g.tileId===v);if((0,I.pC)(O))return O.readers;const m=new Map,l=this._searchIndex(r.bounds),d=[];for(const g of l){const L=this._storage.getInstanceId(g),M=p(L),b=o(L);m.has(M)||m.set(M,[]),m.get(M).push(b)}return m.forEach((g,L)=>{const M=this._featureSetsByInstance.get(L);d.push(a.t.from(M,g))}),this._indexSearchCache.enqueue({tileId:v,readers:d}),d}insert(r){const v=r.getCursor(),O=this._storage;for(;v.next();){var m;const l=T(v.instance,v.getIndex()),d=v.getObjectId(),g=null!=(m=this._objectIdToDisplayId.get(d))?m:this._storage.createDisplayId();v.setDisplayId(g),O.setInstanceId(g,l),this._objectIdToDisplayId.set(d,g)}this._featureSetsByInstance.set(r.instance,r),this._spatialIndexInvalid=!0}remove(r){const v=this._objectIdToDisplayId.get(r);if(!v)return;const O=this._storage.getInstanceId(v),m=o(O),l=p(O),d=this._featureSetsByInstance.get(l);this._objectIdToDisplayId.delete(r),this._storage.releaseDisplayId(v),d.removeAtIndex(m),d.isEmpty&&this._featureSetsByInstance.delete(l),this._spatialIndexInvalid=!0}forEach(r){this._objectIdToDisplayId.forEach(v=>{const O=this._storage.getInstanceId(v),m=this._lookupFeature(O);r(m)})}forEachUnsafe(r){this._objectIdToDisplayId.forEach(v=>{const O=this._storage.getInstanceId(v),m=p(O),l=o(O),d=this._getFeatureSet(m);d.setIndex(l),r(d)})}forEachInBounds(r,v){const O=this._searchIndex(r);for(const m of O){const l=this.lookupFeatureByDisplayId(m,this._storage);v((0,I.Wg)(l))}}forEachBounds(r,v,O){this._rebuildIndex();const m=[0,0,0,0];for(const l of r){if(!l.readGeometry())continue;const d=l.getDisplayId();m[0]=this._storage.getXMin(d),m[1]=this._storage.getYMin(d),m[2]=this._storage.getXMax(d),m[3]=this._storage.getYMax(d),v((0,P.JR)(O,m))}}sweepFeatures(r,v,O){this._spatialIndexInvalid=!0,this._objectIdToDisplayId.forEach((m,l)=>{r.has(m)||(v.releaseDisplayId(m),O&&O.unsetAttributeData(m),this._objectIdToDisplayId.delete(l))}),this.events.emit("changed")}sweepFeatureSets(r){this._spatialIndexInvalid=!0,this._featureSetsByInstance.forEach((v,O)=>{r.has(O)||this._featureSetsByInstance.delete(O)})}lookupObjectId(r,v){const O=this.lookupFeatureByDisplayId(r,v);return(0,I.Wi)(O)?null:O.getObjectId()}lookupDisplayId(r){return this._objectIdToDisplayId.get(r)}lookupFeatureByDisplayId(r,v){const O=v.getInstanceId(r);return this._lookupFeature(O)}lookupByDisplayIdUnsafe(r){const v=this._storage.getInstanceId(r),O=p(v),m=o(v),l=this._getFeatureSet(O);return l?(l.setIndex(m),l):null}_insertFeature(r,v){const O=this._storage,m=r.getObjectId(),l=T(r.instance,r.getIndex());O.getInstanceId(r.getDisplayId());let d=this._objectIdToDisplayId.get(m);d||(d=O.createDisplayId(),this._objectIdToDisplayId.set(m,d),this._spatialIndexInvalid=!0),r.setDisplayId(d),O.setInstanceId(d,l),this.setComputedAttributes(O,r,d,v)}_searchIndex(r){return this._rebuildIndex(),this._index.search({minX:r[0],minY:r[1],maxX:r[2],maxY:r[3]})}_rebuildIndex(){if(!this._spatialIndexInvalid)return;const r=[];"snapshot"===this.mode?this._featureSetsByInstance.forEach(v=>{const O=v.getCursor();for(;O.next();){const m=O.getDisplayId();this._storage.setBounds(m,O)&&r.push(m)}}):this._objectIdToDisplayId.forEach(v=>{const O=this._storage.getInstanceId(v);this._storage.setBounds(v,this._lookupFeature(O))&&r.push(v)}),this._index.clear(),this._index.load(r),this._indexSearchCache.clear(),this._spatialIndexInvalid=!1}_lookupFeature(r){const v=p(r),O=o(r),m=this._getFeatureSet(v);if(!m)return null;const l=m.getCursor();return l.setIndex(O),l}_getFeatureSet(r){return this._featureSetsByInstance.get(r)}}},16669:(V,x,e)=>{e.d(x,{J:()=>T});var s=e(15861),i=e(8314),f=e(62208),I=e(84682),A=e(46679),P=e(63290);const a=e.e(2445).then(e.bind(e,22445));class T{constructor(o,y){this._canCacheExpressionValue=!1,this._sourceInfo=o,this._bitsets={computed:y.getBitset(y.createBitset())}}invalidate(){this._bitsets.computed.clear()}updateSchema(o,y){var E=this;return(0,s.Z)(function*(){const _=(0,I.Hg)(E._schema,y);if(E._schema=y,!y||(0,f.Wi)(_)||!(0,I.uD)(_,"attributes"))return;(0,i.Z)("esri-2d-update-debug")&&console.debug("Applying Update - Store:",_),E._bitsets.computed.clear(),o.targets[y.name]=!0;const r=y.attributes,v=[],O=[];for(const m in r){const l=r[m];switch(l.type){case"field":break;case"expression":v.push(E._createArcadeComputedField(l));break;case"label-expression":v.push(E._createLabelArcadeComputedField(l));break;case"statistic":O.push(l)}}E._computedFields=yield Promise.all(v),E._canCacheExpressionValue=!E._computedFields.some(m=>"expression"===m.type&&m.expression.referencesScale()),E._statisticFields=O})()}setComputedAttributes(o,y,E,_){const r=this._bitsets.computed;if(!this._canCacheExpressionValue||!r.has(E)){r.set(E);for(const v of this._computedFields){const O=this._evaluateField(y,v,_);switch(v.resultType){case"numeric":o.setComputedNumericAtIndex(E,v.fieldIndex,O);break;case"string":o.setComputedStringAtIndex(E,v.fieldIndex,O)}}}}_createArcadeComputedField(o){var y=this;return(0,s.Z)(function*(){const E=y._sourceInfo.spatialReference,_=y._sourceInfo.fieldsIndex;return se(X({},o),{expression:yield(0,A.Yi)(o.valueExpression,E,_)})})()}_createLabelArcadeComputedField(o){var y=this;return(0,s.Z)(function*(){const E=y._sourceInfo.spatialReference,_=y._sourceInfo.fieldsIndex,{createLabelFunction:r}=yield a,v=yield r(o.label,_,E);return se(X({},o),{builder:v})})()}_evaluateField(o,y,E){switch(y.type){case"label-expression":{const _=o.readArcadeFeature();return y.builder.evaluate(_)||""}case"expression":{const{expression:_}=y;return function c(p,o,y){p.referencesGeometry();const E=o.readArcadeFeature();try{return p.evaluate(se(X({},y),{$feature:E}))}catch(_){return P.Z.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",_),null}}(_,o,{$view:{scale:E}})}}}}},13112:(V,x,e)=>{e.d(x,{Z:()=>T});var s=e(17626),i=e(80542),f=e(77712),c=(e(85931),e(8314),e(90912),e(76898));let a=class extends i.r{initialize(){}destroy(){}get supportsTileUpdates(){return!1}get spatialReference(){const p=this.get("tileStore.tileScheme.spatialReference");return p&&p.toJSON()||null}};(0,s._)([(0,f.Cb)({readOnly:!0})],a.prototype,"supportsTileUpdates",null),(0,s._)([(0,f.Cb)({constructOnly:!0})],a.prototype,"remoteClient",void 0),(0,s._)([(0,f.Cb)({constructOnly:!0})],a.prototype,"service",void 0),(0,s._)([(0,f.Cb)()],a.prototype,"spatialReference",null),(0,s._)([(0,f.Cb)({constructOnly:!0})],a.prototype,"tileInfo",void 0),(0,s._)([(0,f.Cb)({constructOnly:!0})],a.prototype,"tileStore",void 0),a=(0,s._)([(0,c.j)("esri.views.2d.layers.features.processors.BaseProcessor")],a);const T=a},52397:(V,x,e)=>{e.d(x,{t:()=>i});var s=e(25208);class i extends s.s{constructor(I,A){super(s.s.createInstance(),I.fullSchema()),this._currentIndex=-1,this._reader=I,this._indices=A}static from(I,A){return new i(I.copy(),A)}get hasNext(){return this._currentIndex+1<this._indices.length}getSize(){return this._indices.length}getCursor(){return this.copy()}copy(){const I=new i(this._reader.copy(),this._indices);return I._currentIndex=this._currentIndex,I}next(){for(;this._nextIndex()&&!this._reader._getExists(););return this._currentIndex<this._indices.length}_nextIndex(){return++this._currentIndex<this._indices.length&&(this._reader.setIndex(this._indices[this._currentIndex]),!0)}setArcadeSpatialReference(I){this._reader.setArcadeSpatialReference(I)}attachStorage(I){this._reader.attachStorage(I)}get geometryType(){return this._reader.geometryType}get hasFeatures(){return this._reader.hasFeatures}get exceededTransferLimit(){return this._reader.exceededTransferLimit}get hasZ(){return this._reader.hasZ}get hasM(){return this._reader.hasM}getStorage(){return this._reader.getStorage()}getComputedNumeric(I){return this._reader.getComputedNumericAtIndex(0)}setComputedNumeric(I,A){return this._reader.setComputedNumericAtIndex(A,0)}getComputedString(I){return this._reader.getComputedStringAtIndex(0)}setComputedString(I,A){return this._reader.setComputedStringAtIndex(0,A)}getComputedNumericAtIndex(I){return this._reader.getComputedNumericAtIndex(I)}setComputedNumericAtIndex(I,A){this._reader.setComputedNumericAtIndex(I,A)}getComputedStringAtIndex(I){return this._reader.getComputedStringAtIndex(I)}setComputedStringAtIndex(I,A){return this._reader.setComputedStringAtIndex(I,A)}transform(I,A,P,c){const a=this.copy();return a._reader=this._reader.transform(I,A,P,c),a}readAttribute(I,A=!1){return this._reader.readAttribute(I,A)}readAttributes(){return this._reader.readAttributes()}joinAttributes(I){return this._reader.joinAttributes(I)}readArcadeFeature(){return this._reader.readArcadeFeature()}geometry(){return this._reader.geometry()}field(I){return this.readAttribute(I,!0)}hasField(I){return this._reader.hasField(I)}setField(I,A){return this._reader.setField(I,A)}keys(){return this._reader.keys()}castToText(){return this._reader.castToText()}getQuantizationTransform(){return this._reader.getQuantizationTransform()}getFieldNames(){return this._reader.getFieldNames()}getAttributeHash(){return this._reader.getAttributeHash()}getObjectId(){return this._reader.getObjectId()}getDisplayId(){return this._reader.getDisplayId()}setDisplayId(I){return this._reader.setDisplayId(I)}getGroupId(){return this._reader.getGroupId()}setGroupId(I){return this._reader.setGroupId(I)}getXHydrated(){return this._reader.getXHydrated()}getYHydrated(){return this._reader.getYHydrated()}getX(){return this._reader.getX()}getY(){return this._reader.getY()}setIndex(I){return this._reader.setIndex(I)}getIndex(){return this._reader.getIndex()}readLegacyFeature(){return this._reader.readLegacyFeature()}readOptimizedFeature(){return this._reader.readOptimizedFeature()}readLegacyPointGeometry(){return this._reader.readLegacyPointGeometry()}readLegacyGeometry(){return this._reader.readLegacyGeometry()}readLegacyCentroid(){return this._reader.readLegacyCentroid()}readGeometryArea(){return this._reader.readGeometryArea()}readUnquantizedGeometry(){return this._reader.readUnquantizedGeometry()}readHydratedGeometry(){return this._reader.readHydratedGeometry()}readGeometry(){return this._reader.readGeometry()}readCentroid(){return this._reader.readCentroid()}_readAttribute(I,A){throw new Error("Error: Should not be called. Underlying _reader should be used instead")}_readAttributes(){throw new Error("Error: Should not be called. Underlying _reader should be used instead")}}},84225:(V,x,e)=>{e.d(x,{Z:()=>T});var s=e(17626),i=e(80542),f=e(77712),c=(e(85931),e(8314),e(90912),e(76898));let a=class extends i.r{constructor(p){super(p),this.tiles=new Map}destroy(){this.tiles.clear(),this.layer=this.layerView=this.tileInfoView=this.tiles=null}get updating(){return this.isUpdating()}acquireTile(p){const o=this.createTile(p);return o.once("isReady",()=>this.notifyChange("updating")),this.tiles.set(p.id,o),o}forceAttributeTextureUpload(){}forEachTile(p){this.tiles.forEach(p)}releaseTile(p){this.tiles.delete(p.key.id),this.disposeTile(p)}isUpdating(){let p=!0;return this.tiles.forEach(o=>{p=p&&o.isReady}),!p}setHighlight(){}invalidateLabels(){}requestUpdate(){this.layerView.requestUpdate()}};(0,s._)([(0,f.Cb)()],a.prototype,"layer",void 0),(0,s._)([(0,f.Cb)()],a.prototype,"layerView",void 0),(0,s._)([(0,f.Cb)()],a.prototype,"tileInfoView",void 0),(0,s._)([(0,f.Cb)()],a.prototype,"updating",null),a=(0,s._)([(0,c.j)("esri.views.2d.layers.features.tileRenderers.BaseTileRenderer")],a);const T=a},36275:(V,x,e)=>{e.d(x,{Z:()=>f});var s=e(39406),i=e(55051);class f extends i.Z{renderChildren(A){this.attributeView.bindTextures(A.context,!1),this.children.some(P=>P.hasData)&&(super.renderChildren(A),A.drawPhase===s.jx.MAP&&this._renderChildren(A),this.hasHighlight()&&A.drawPhase===s.jx.HIGHLIGHT&&this._renderHighlight(A),this._boundsRenderer&&this._boundsRenderer.doRender(A))}_renderHighlight(A){const{painter:P}=A,c=P.effects.highlight;c.bind(A),this._renderChildren(A,c.defines),c.draw(A),c.unbind()}}},13305:(V,x,e)=>{e.d(x,{Z:()=>y});var s=e(17626),c=(e(63290),e(90912),e(85931),e(8314),e(82255),e(76898)),a=e(39406),T=e(55051),p=e(67969);let o=class extends T.Z{renderChildren(E){if(E.drawPhase!==a.jx.HIGHLIGHT||(this.attributeView.bindTextures(E.context),!this.children.some(v=>v.hasData)))return;super.renderChildren(E);const{painter:_}=E,r=_.effects.highlight;r.bind(E),E.context.setColorMask(!0,!0,!0,!0),E.context.clear(p.lk.COLOR_BUFFER_BIT),this._renderChildren(E,r.defines.concat(["highlightAll"])),r.draw(E),r.unbind()}};o=(0,s._)([(0,c.j)("esri.views.2d.layers.support.HighlightGraphicContainer")],o);const y=o},19625:(V,x,e)=>{e.d(x,{U$:()=>A});var s=e(60479),i=e(81096);class f{constructor(c,a){this.layout=c,this.buffer="number"==typeof a?new ArrayBuffer(a*c.stride):a;for(const T of c.fieldNames){const p=c.fields.get(T);this[T]=new p.constructor(this.buffer,p.offset,this.stride)}}get stride(){return this.layout.stride}get count(){return this.buffer.byteLength/this.stride}get byteLength(){return this.buffer.byteLength}getField(c,a){const T=this[c];return T&&T.elementCount===a.ElementCount&&T.elementType===a.ElementType?T:null}slice(c,a){return new f(this.layout,this.buffer.slice(c*this.stride,a*this.stride))}copyFrom(c,a,T,p){const o=this.stride;if(o%4==0){const y=new Uint32Array(c.buffer,a*o,p*o/4);new Uint32Array(this.buffer,T*o,p*o/4).set(y)}else{const y=new Uint8Array(c.buffer,a*o,p*o);new Uint8Array(this.buffer,T*o,p*o).set(y)}}}class I{constructor(){this.stride=0,this.fields=new Map,this.fieldNames=[]}vec2f(c,a){return this._appendField(c,s.Eu,a),this}vec2f64(c,a){return this._appendField(c,s.q6,a),this}vec3f(c,a){return this._appendField(c,s.ct,a),this}vec3f64(c,a){return this._appendField(c,s.fP,a),this}vec4f(c,a){return this._appendField(c,s.ek,a),this}vec4f64(c,a){return this._appendField(c,s.Cd,a),this}mat3f(c,a){return this._appendField(c,s.gK,a),this}mat3f64(c,a){return this._appendField(c,s.ey,a),this}mat4f(c,a){return this._appendField(c,s.bj,a),this}mat4f64(c,a){return this._appendField(c,s.O1,a),this}vec4u8(c,a){return this._appendField(c,s.mc,a),this}f32(c,a){return this._appendField(c,s.ly,a),this}f64(c,a){return this._appendField(c,s.oS,a),this}u8(c,a){return this._appendField(c,s.D_,a),this}u16(c,a){return this._appendField(c,s.av,a),this}i8(c,a){return this._appendField(c,s.Hz,a),this}vec2i8(c,a){return this._appendField(c,s.Vs,a),this}vec2i16(c,a){return this._appendField(c,s.or,a),this}vec2u8(c,a){return this._appendField(c,s.xA,a),this}vec4u16(c,a){return this._appendField(c,s.v6,a),this}u32(c,a){return this._appendField(c,s.Nu,a),this}_appendField(c,a,T){const p=a.ElementCount*(0,i.n1)(a.ElementType);this.fields.set(c,{size:p,constructor:a,offset:this.stride,optional:T}),this.stride+=p,this.fieldNames.push(c)}alignTo(c){return this.stride=Math.floor((this.stride+c-1)/c)*c,this}hasField(c){return this.fieldNames.indexOf(c)>=0}createBuffer(c){return new f(this,c)}createView(c){return new f(this,c)}clone(){const c=new I;return c.stride=this.stride,c.fields=new Map,this.fields.forEach((a,T)=>c.fields.set(T,a)),c.fieldNames=this.fieldNames.slice(),c.BufferType=this.BufferType,c}}function A(){return new I}},88569:(V,x,e)=>{e.d(x,{Bh:()=>y,IB:()=>P,j7:()=>c,je:()=>o,ve:()=>T,wu:()=>I});var s=e(42743),i=e(67969),f=e(2078);const I=(0,f.wK)(i.zi.SRC_ALPHA,i.zi.ONE,i.zi.ONE_MINUS_SRC_ALPHA,i.zi.ONE_MINUS_SRC_ALPHA),A=(0,f.if)(i.zi.ONE,i.zi.ONE),P=(0,f.if)(i.zi.ZERO,i.zi.ONE_MINUS_SRC_ALPHA);function c(E){return E===s.Am.FrontFace?null:E===s.Am.Alpha?P:A}const T=5e5,p={factor:-1,units:-2};function o(E){return E?p:null}function y(E,_=i.wb.LESS){return E===s.Am.NONE||E===s.Am.FrontFace?_:i.wb.LEQUAL}},91263:(V,x,e)=>{var s,i;e.d(x,{C:()=>s}),(i=s||(s={}))[i.MATERIAL=0]="MATERIAL",i[i.MATERIAL_ALPHA=1]="MATERIAL_ALPHA",i[i.MATERIAL_DEPTH=2]="MATERIAL_DEPTH",i[i.MATERIAL_NORMAL=3]="MATERIAL_NORMAL",i[i.MATERIAL_DEPTH_SHADOWMAP_ALL=4]="MATERIAL_DEPTH_SHADOWMAP_ALL",i[i.MATERIAL_HIGHLIGHT=5]="MATERIAL_HIGHLIGHT",i[i.MATERIAL_DEPTH_SHADOWMAP_DEFAULT=6]="MATERIAL_DEPTH_SHADOWMAP_DEFAULT",i[i.MATERIAL_DEPTH_SHADOWMAP_HIGHLIGHT=7]="MATERIAL_DEPTH_SHADOWMAP_HIGHLIGHT",i[i.MAX_PASS=8]="MAX_PASS"},5894:(V,x,e)=>{var s,i;e.d(x,{r:()=>s}),(i=s||(s={}))[i.INTEGRATED_MESH=0]="INTEGRATED_MESH",i[i.OPAQUE_TERRAIN=1]="OPAQUE_TERRAIN",i[i.OPAQUE_MATERIAL=2]="OPAQUE_MATERIAL",i[i.OPAQUE_PLUGIN=3]="OPAQUE_PLUGIN",i[i.TRANSPARENT_MATERIAL=4]="TRANSPARENT_MATERIAL",i[i.TRANSPARENT_PLUGIN=5]="TRANSPARENT_PLUGIN",i[i.TRANSPARENT_TERRAIN=6]="TRANSPARENT_TERRAIN",i[i.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL=7]="TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL",i[i.OCCLUDED_TERRAIN=8]="OCCLUDED_TERRAIN",i[i.OCCLUDER_MATERIAL=9]="OCCLUDER_MATERIAL",i[i.TRANSPARENT_OCCLUDER_MATERIAL=10]="TRANSPARENT_OCCLUDER_MATERIAL",i[i.OCCLUSION_PIXELS=11]="OCCLUSION_PIXELS",i[i.POSTPROCESSING_ENVIRONMENT_OPAQUE=12]="POSTPROCESSING_ENVIRONMENT_OPAQUE",i[i.POSTPROCESSING_ENVIRONMENT_TRANSPARENT=13]="POSTPROCESSING_ENVIRONMENT_TRANSPARENT",i[i.LASERLINES=14]="LASERLINES",i[i.LASERLINES_CONTRAST_CONTROL=15]="LASERLINES_CONTRAST_CONTROL",i[i.HUD_MATERIAL=16]="HUD_MATERIAL",i[i.LABEL_MATERIAL=17]="LABEL_MATERIAL",i[i.LINE_CALLOUTS=18]="LINE_CALLOUTS",i[i.LINE_CALLOUTS_HUD_DEPTH=19]="LINE_CALLOUTS_HUD_DEPTH",i[i.DRAPED_MATERIAL=20]="DRAPED_MATERIAL",i[i.DRAPED_WATER=21]="DRAPED_WATER",i[i.VOXEL=22]="VOXEL",i[i.MAX_SLOTS=23]="MAX_SLOTS"},16396:(V,x,e)=>{var s,i;e.d(x,{T:()=>s}),(i=s||(s={})).POSITION="position",i.NORMAL="normal",i.UV0="uv0",i.AUXPOS1="auxpos1",i.AUXPOS2="auxpos2",i.MAPPOS="mapPos",i.COLOR="color",i.SYMBOLCOLOR="symbolColor",i.SIZE="size",i.TANGENT="tangent",i.OFFSET="offset",i.SUBDIVISIONFACTOR="subdivisionFactor",i.COLORFEATUREATTRIBUTE="colorFeatureAttribute",i.SIZEFEATUREATTRIBUTE="sizeFeatureAttribute",i.OPACITYFEATUREATTRIBUTE="opacityFeatureAttribute",i.DISTANCETOSTART="distanceToStart",i.UVMAPSPACE="uvMapSpace",i.BOUNDINGRECT="boundingRect",i.UVREGION="uvRegion",i.NORMALCOMPRESSED="normalCompressed",i.PROFILERIGHT="profileRight",i.PROFILEUP="profileUp",i.PROFILEVERTEXANDNORMAL="profileVertexAndNormal",i.FEATUREVALUE="featureValue",i.MODELORIGINHI="modelOriginHi",i.MODELORIGINLO="modelOriginLo",i.MODEL="model",i.MODELNORMAL="modelNormal",i.INSTANCECOLOR="instanceColor",i.INSTANCEFEATUREATTRIBUTE="instanceFeatureAttribute",i.LOCALTRANSFORM="localTransform",i.GLOBALTRANSFORM="globalTransform",i.BOUNDINGSPHERE="boundingSphere",i.MODELORIGIN="modelOrigin",i.MODELSCALEFACTORS="modelScaleFactors",i.FEATUREATTRIBUTE="featureAttribute",i.STATE="state",i.LODLEVEL="lodLevel",i.POSITION0="position0",i.POSITION1="position1",i.NORMALA="normalA",i.NORMALB="normalB",i.COMPONENTINDEX="componentIndex",i.VARIANTOFFSET="variantOffset",i.VARIANTSTROKE="variantStroke",i.VARIANTEXTENSION="variantExtension",i.U8PADDING="u8padding",i.U16PADDING="u16padding",i.SIDENESS="sideness",i.START="start",i.END="end",i.UP="up",i.EXTRUDE="extrude"},42743:(V,x,e)=>{var s,i,f,I,A,P,c,a,T,p,o,y,E,_,r;e.d(x,{Am:()=>I,CE:()=>o,Gv:()=>i,JJ:()=>E,MX:()=>p,Rw:()=>P,Vr:()=>s,hU:()=>c}),(r=s||(s={}))[r.None=0]="None",r[r.Front=1]="Front",r[r.Back=2]="Back",r[r.COUNT=3]="COUNT",function(r){r[r.Less=0]="Less",r[r.Lequal=1]="Lequal",r[r.COUNT=2]="COUNT"}(i||(i={})),function(r){r[r.NONE=0]="NONE",r[r.SMAA=1]="SMAA"}(f||(f={})),function(r){r[r.Color=0]="Color",r[r.Alpha=1]="Alpha",r[r.FrontFace=2]="FrontFace",r[r.NONE=3]="NONE",r[r.COUNT=4]="COUNT"}(I||(I={})),function(r){r[r.BACKGROUND=0]="BACKGROUND",r[r.UPDATE=1]="UPDATE"}(A||(A={})),function(r){r[r.NOT_LOADED=0]="NOT_LOADED",r[r.LOADING=1]="LOADING",r[r.LOADED=2]="LOADED"}(P||(P={})),function(r){r[r.IntegratedMeshMaskExcluded=1]="IntegratedMeshMaskExcluded",r[r.OutlineVisualElementMask=2]="OutlineVisualElementMask"}(c||(c={})),function(r){r[r.ASYNC=0]="ASYNC",r[r.SYNC=1]="SYNC"}(a||(a={})),function(r){r[r.Highlight=0]="Highlight",r[r.MaskOccludee=1]="MaskOccludee",r[r.COUNT=2]="COUNT"}(T||(T={})),function(r){r[r.Triangle=0]="Triangle",r[r.Point=1]="Point",r[r.Line=2]="Line"}(p||(p={})),function(r){r[r.STRETCH=1]="STRETCH",r[r.PAD=2]="PAD"}(o||(o={})),function(r){r[r.CHANGED=0]="CHANGED",r[r.UNCHANGED=1]="UNCHANGED"}(y||(y={})),function(r){r[r.Blend=0]="Blend",r[r.Opaque=1]="Opaque",r[r.Mask=2]="Mask",r[r.MaskBlend=3]="MaskBlend",r[r.COUNT=4]="COUNT"}(E||(E={})),function(r){r[r.OFF=0]="OFF",r[r.ON=1]="ON"}(_||(_={}))},94672:(V,x,e)=>{e.d(x,{K:()=>A}),e(29132);var i=e(62208),f=e(16730),I=e(2004);function A(a,T,p,o=new I.Z){let y;if("2d"===p.type)y=T*p.resolution;else if("3d"===p.type){const m=p.overlayPixelSizeInMapUnits(a),l=p.basemapSpatialReference;y=(0,i.pC)(l)&&!l.equals(p.spatialReference)?(0,f.c9)(l)/(0,f.c9)(p.spatialReference):T*m}const E=a.x-y,_=a.y-y,r=a.x+y,v=a.y+y,{spatialReference:O}=p;return o.xmin=Math.min(E,r),o.ymin=Math.min(_,v),o.xmax=Math.max(E,r),o.ymax=Math.max(_,v),o.spatialReference=O,o}new I.Z},33e3:(V,x,e)=>{e.d(x,{G:()=>I});var s=e(62208);class i{constructor(){this._outer=new Map}clear(){this._outer.clear()}get empty(){return 0===this._outer.size}get(P,c){var a;return null==(a=this._outer.get(P))?void 0:a.get(c)}set(P,c,a){const T=this._outer.get(P);T?T.set(c,a):this._outer.set(P,new Map([[c,a]]))}delete(P,c){const a=this._outer.get(P);a&&(a.delete(c),0===a.size&&this._outer.delete(P))}forEach(P){this._outer.forEach((c,a)=>P(c,a))}}var f=e(17867);class I{constructor(P){this._rctx=P,this._store=new i}dispose(){this._store.forEach(P=>P.forEach(c=>c.dispose())),this._store.clear()}acquire(P,c,a,T){const p=this._store.get(P,c);if((0,s.pC)(p))return p.ref(),p;const o=new f.$(this._rctx,P,c,a,T);return o.ref(),this._store.set(P,c,o),o}get test(){let P=0;return this._store.forEach(c=>c.forEach(a=>P+=a.hasGLName?2:1)),{cachedWebGLObjects:P}}}},2757:(V,x,e)=>{function i(c,a,T){for(let p=0;p<T;++p)a[2*p]=c[p],a[2*p+1]=c[p]-a[2*p]}function I(c,a,T,p){for(let o=0;o<p;++o)A[0]=c[o],i(A,P,1),a[o]=P[0],T[o]=P[1]}e.d(x,{LF:()=>i,po:()=>I});const A=new Float64Array(1),P=new Float32Array(2)},80322:(V,x,e)=>{function s(i){let f="";for(const I in i){const A=i[I];if("boolean"==typeof A)A&&(f+=`#define ${I}\n`);else if("number"==typeof A)f+=`#define ${I} ${A.toFixed()}\n`;else if("object"==typeof A){const P=A.options;let c=0;for(const a in P)f+=`#define ${P[a]} ${(c++).toFixed()}\n`;f+=`#define ${I} ${P[A.value]}\n`}}return f}e.d(x,{K:()=>s})},2078:(V,x,e)=>{e.d(x,{BK:()=>T,LZ:()=>a,if:()=>f,jp:()=>re,sm:()=>m,wK:()=>I,zp:()=>c});var s=e(42743),i=e(67969);function f(h,D,B=i.db.ADD,Z=[0,0,0,0]){return{srcRgb:h,srcAlpha:h,dstRgb:D,dstAlpha:D,opRgb:B,opAlpha:B,color:{r:Z[0],g:Z[1],b:Z[2],a:Z[3]}}}function I(h,D,B,Z,$=i.db.ADD,q=i.db.ADD,k=[0,0,0,0]){return{srcRgb:h,srcAlpha:D,dstRgb:B,dstAlpha:Z,opRgb:$,opAlpha:q,color:{r:k[0],g:k[1],b:k[2],a:k[3]}}}const A={face:i.LR.BACK,mode:i.Wf.CCW},P={face:i.LR.FRONT,mode:i.Wf.CCW},c=h=>h===s.Vr.Back?A:h===s.Vr.Front?P:null,a={zNear:0,zFar:1},T={r:!0,g:!0,b:!0,a:!0};function p(h){return g.intern(h)}function o(h){return M.intern(h)}function y(h){return N.intern(h)}function E(h){return C.intern(h)}function _(h){return R.intern(h)}function r(h){return W.intern(h)}function v(h){return K.intern(h)}function O(h){return F.intern(h)}function m(h){return Q.intern(h)}class l{constructor(D,B){this.makeKey=D,this.makeRef=B,this.interns=new Map}intern(D){if(!D)return null;const B=this.makeKey(D),Z=this.interns;return Z.has(B)||Z.set(B,this.makeRef(D)),Z.get(B)}}function d(h){return"["+h.join(",")+"]"}const g=new l(L,h=>X({__tag:"Blending"},h));function L(h){return h?d([h.srcRgb,h.srcAlpha,h.dstRgb,h.dstAlpha,h.opRgb,h.opAlpha,h.color.r,h.color.g,h.color.b,h.color.a]):null}const M=new l(b,h=>X({__tag:"Culling"},h));function b(h){return h?d([h.face,h.mode]):null}const N=new l(j,h=>X({__tag:"PolygonOffset"},h));function j(h){return h?d([h.factor,h.units]):null}const C=new l(U,h=>X({__tag:"DepthTest"},h));function U(h){return h?d([h.func]):null}const R=new l(S,h=>X({__tag:"StencilTest"},h));function S(h){return h?d([h.function.func,h.function.ref,h.function.mask,h.operation.fail,h.operation.zFail,h.operation.zPass]):null}const W=new l(G,h=>X({__tag:"DepthWrite"},h));function G(h){return h?d([h.zNear,h.zFar]):null}const K=new l(z,h=>X({__tag:"ColorWrite"},h));function z(h){return h?d([h.r,h.g,h.b,h.a]):null}const F=new l(w,h=>X({__tag:"StencilWrite"},h));function w(h){return h?d([h.mask]):null}const Q=new l(function H(h){return h?d([L(h.blending),b(h.culling),j(h.polygonOffset),U(h.depthTest),S(h.stencilTest),G(h.depthWrite),z(h.colorWrite),w(h.stencilWrite)]):null},h=>({blending:p(h.blending),culling:o(h.culling),polygonOffset:y(h.polygonOffset),depthTest:E(h.depthTest),stencilTest:_(h.stencilTest),depthWrite:r(h.depthWrite),colorWrite:v(h.colorWrite),stencilWrite:O(h.stencilWrite)}));class re{constructor(D){this._pipelineInvalid=!0,this._blendingInvalid=!0,this._cullingInvalid=!0,this._polygonOffsetInvalid=!0,this._depthTestInvalid=!0,this._stencilTestInvalid=!0,this._depthWriteInvalid=!0,this._colorWriteInvalid=!0,this._stencilWriteInvalid=!0,this._stateSetters=D}setPipeline(D){(this._pipelineInvalid||D!==this._pipeline)&&(this._setBlending(D.blending),this._setCulling(D.culling),this._setPolygonOffset(D.polygonOffset),this._setDepthTest(D.depthTest),this._setStencilTest(D.stencilTest),this._setDepthWrite(D.depthWrite),this._setColorWrite(D.colorWrite),this._setStencilWrite(D.stencilWrite),this._pipeline=D),this._pipelineInvalid=!1}invalidateBlending(){this._blendingInvalid=!0,this._pipelineInvalid=!0}invalidateCulling(){this._cullingInvalid=!0,this._pipelineInvalid=!0}invalidatePolygonOffset(){this._polygonOffsetInvalid=!0,this._pipelineInvalid=!0}invalidateDepthTest(){this._depthTestInvalid=!0,this._pipelineInvalid=!0}invalidateStencilTest(){this._stencilTestInvalid=!0,this._pipelineInvalid=!0}invalidateDepthWrite(){this._depthWriteInvalid=!0,this._pipelineInvalid=!0}invalidateColorWrite(){this._colorWriteInvalid=!0,this._pipelineInvalid=!0}invalidateStencilWrite(){this._stencilTestInvalid=!0,this._pipelineInvalid=!0}_setBlending(D){this._blending=this._setSubState(D,this._blending,this._blendingInvalid,this._stateSetters.setBlending),this._blendingInvalid=!1}_setCulling(D){this._culling=this._setSubState(D,this._culling,this._cullingInvalid,this._stateSetters.setCulling),this._cullingInvalid=!1}_setPolygonOffset(D){this._polygonOffset=this._setSubState(D,this._polygonOffset,this._polygonOffsetInvalid,this._stateSetters.setPolygonOffset),this._polygonOffsetInvalid=!1}_setDepthTest(D){this._depthTest=this._setSubState(D,this._depthTest,this._depthTestInvalid,this._stateSetters.setDepthTest),this._depthTestInvalid=!1}_setStencilTest(D){this._stencilTest=this._setSubState(D,this._stencilTest,this._stencilTestInvalid,this._stateSetters.setStencilTest),this._stencilTestInvalid=!1}_setDepthWrite(D){this._depthWrite=this._setSubState(D,this._depthWrite,this._depthWriteInvalid,this._stateSetters.setDepthWrite),this._depthWriteInvalid=!1}_setColorWrite(D){this._colorWrite=this._setSubState(D,this._colorWrite,this._colorWriteInvalid,this._stateSetters.setColorWrite),this._colorWriteInvalid=!1}_setStencilWrite(D){this._stencilWrite=this._setSubState(D,this._stencilWrite,this._stencilWriteInvalid,this._stateSetters.setStencilWrite),this._stencilTestInvalid=!1}_setSubState(D,B,Z,$){return(Z||D!==B)&&($(D),this._pipelineInvalid=!0),D}}}}]);